# Реалізація Order Wizard за допомогою FSD підходу в Next.js

## Загальна архітектура реалізації

Order Wizard реалізовано за допомогою Feature-Sliced Design (FSD) на фронтенді з використанням Next.js та MUI v7, при цьому вся бізнес-логіка (розрахунки цін, обробка даних) знаходиться на бекенді (Java Spring).

## Структура директорій за FSD

StrucКожен компонент та модуль у структурі розроблено відповідно до принципів Feature-Sliced Design, з чітким поділом відповідальності. Нижче наведено докладну структуру директорій з поясненнями:

```
features/                           # Верхній рівень для всіх функціональних можливостей
├── order-wizard/                    # Фіча Order Wizard для оформлення замовлень
│   ├── model.ts                     # Основні типи, інтерфейси та константи для всього Order Wizard
│   │                                # Містить типи OrderWizardState, OrderWizardStep, WizardConfig
│   ├── api.ts                       # Глобальні API-функції для роботи з замовленнями
│   │                                # createOrder, getOrders, finalizeOrder, exportReceipt
│   ├── lib.ts                       # Загальні утиліти та хуки для всіх компонентів OrderWizard
│   │                                # useWizardNavigation, useAutoSave, formatOrderData
│   ├── components/                  # Папка з усіма компонентами Order Wizard
│   │   ├── wizard-container/        # Контейнерний компонент для керування всім візардом
│   │   │   ├── model.ts             # Типи для контейнера: WizardContainerProps, WizardStep
│   │   │   ├── api.ts               # API для роботи зі станом візарда (збереження стану між сесіями)
│   │   │   │                        # saveWizardState, loadWizardState, resetWizardState
│   │   │   ├── lib.ts               # Утиліти для навігації між кроками та валідації всього візарда
│   │   │   │                        # validateWizardStep, calculateStepCompletion, navigateToStep
│   │   │   ├── ui/                  # UI компоненти для контейнера
│   │   │   │   ├── WizardStepIndicator.tsx  # Індикатор поточного кроку та прогресу
│   │   │   │   │                            # Показує номери та назви кроків, поточний активний крок
│   │   │   │   ├── WizardNavigation.tsx     # Кнопки навігації між кроками
│   │   │   │   │                            # Містить кнопки "Назад", "Далі", "Завершити"
│   │   │   ├── index.tsx            # Головний компонент контейнера, інтегрує всі підкомпоненти
│   │   │   │                        # Керує відображенням поточного кроку та навігацією
│   │   │
│   │   ├── client-selection/        # Компонент вибору/створення клієнта (Етап 1.1)
│   │   │   ├── model.ts             # Типи для клієнтів: Client, ClientSearchParams, ContactMethod
│   │   │   │                        # Містить інтерфейси для форм пошуку та створення клієнта
│   │   │   ├── api.ts               # API для пошуку та створення клієнтів
│   │   │   │                        # searchClients, createClient, getClientById
│   │   │   ├── lib.ts               # Утиліти для валідації даних клієнта та форматування
│   │   │   │                        # validateClientData, formatPhone, parseClientData
│   │   │   ├── ui/                  # UI компоненти для роботи з клієнтами
│   │   │   │   ├── ClientSearch.tsx        # Компонент пошуку існуючих клієнтів
│   │   │   │   │                           # Форма з полями для введення прізвища/телефону
│   │   │   │   ├── ClientList.tsx          # Список знайдених клієнтів з можливістю вибору
│   │   │   │   │                           # Відображає результати пошуку клієнтів у табличному вигляді
│   │   │   │   ├── NewClientForm.tsx       # Форма для створення нового клієнта
│   │   │   │   │                           # Містить поля для ПІБ, телефону, email, адреси, способів зв'язку
│   │   │   ├── index.tsx            # Головний компонент, інтегрує пошук і створення клієнта
│   │   │   │                        # Реалізує логіку перемикання між пошуком та створенням
│   │   │
│   │   ├── order-info/              # Компонент базової інформації замовлення (Етап 1.2)
│   │   │   ├── model.ts             # Типи для базової інформації: OrderBasicInfo, ReceptionPoint
│   │   │   │                        # Описує структуру даних для номера квитанції, унікальної мітки
│   │   │   ├── api.ts               # API для роботи з базовою інформацією замовлення
│   │   │   │                        # generateReceiptNumber, getReceptionPoints
│   │   │   ├── lib.ts               # Утиліти для валідації та генерації даних
│   │   │   │                        # validateUniqueTag, generateTagPlaceholder 
│   │   │   ├── ui/                  # UI компоненти для базової інформації
│   │   │   │   ├── OrderBasicInfo.tsx      # Форма для введення базової інформації
│   │   │   │   │                           # Поля для номера квитанції, мітки, пункту прийому
│   │   │   ├── index.tsx            # Головний компонент базової інформації
│   │   │   │                        # Інтегрує всі дані про замовлення та оновлює стан візарда
│   │   │
│   │   ├── item-manager/            # Менеджер предметів замовлення (Етап 2.0)
│   │   │   ├── model.ts             # Типи для управління предметами: OrderItem, ItemAction
│   │   │   │                        # Описує структуру даних для списку предметів та їх відображення
│   │   │   ├── api.ts               # API для роботи зі списком предметів
│   │   │   │                        # getOrderItems, deleteOrderItem, reorderItems
│   │   │   ├── lib.ts               # Утиліти для обчислення загальної вартості та фільтрації
│   │   │   │                        # calculateTotalCost, filterItemsByCategory, sortItems
│   │   │   ├── ui/                  # UI компоненти для менеджера предметів
│   │   │   │   ├── ItemList.tsx            # Таблиця зі списком доданих предметів
│   │   │   │   │                           # Відображає колонки з назвою, кількістю, ціною
│   │   │   │   ├── ItemSummary.tsx         # Компонент з підсумковою інформацією
│   │   │   │   │                           # Показує кількість предметів, загальну вартість
│   │   │   ├── index.tsx            # Головний компонент менеджера предметів
│   │   │   │                        # Інтегрує список та кнопки для додавання/видалення
│   │   │
│   │   ├── item-wizard/             # Підвізард для додавання предмета (Етапи 2.1-2.5)
│   │   │   ├── model.ts             # Типи для предмета: ItemData, Category, Material, Defect
│   │   │   │                        # Описує всі можливі параметри предмета та їх структуру
│   │   │   ├── api.ts               # API для роботи з категоріями, цінами та додаванням предметів
│   │   │   │                        # getCategories, getItemsByCategory, calculateItemPrice
│   │   │   ├── lib.ts               # Утиліти для валідації даних предмета та підрахунку ціни
│   │   │   │                        # validateItemStep, applyPriceModifiers, formatItemData
│   │   │   ├── ui/                  # UI компоненти для кожного кроку підвізарда
│   │   │   │   ├── ItemBasicInfo.tsx       # Крок 2.1: Вибір категорії та найменування
│   │   │   │   │                           # Форма з вибором категорії, найменування, кількості
│   │   │   │   ├── ItemCharacteristics.tsx # Крок 2.2: Вибір характеристик предмета
│   │   │   │   │                           # Форма з вибором матеріалу, кольору, наповнювача
│   │   │   │   ├── ItemDefects.tsx         # Крок 2.3: Вибір забруднень та дефектів
│   │   │   │   │                           # Чекбокси для плям, дефектів, ризиків
│   │   │   │   ├── ItemPriceCalculator.tsx # Крок 2.4: Розрахунок ціни з модифікаторами
│   │   │   │   │                           # Відображає базову ціну та вплив кожного модифікатора
│   │   │   │   ├── ItemPhotoUpload.tsx     # Крок 2.5: Завантаження фото предмета
│   │   │   │   │                           # Інтерфейс для фотографування та анотування
│   │   │   │   ├── ItemSummary.tsx         # Підсумкова інформація про предмет
│   │   │   │   │                           # Показує всі вибрані параметри та ціну
│   │   │   │   ├── WizardStep.tsx          # Обгортка для кожного кроку підвізарда
│   │   │   │   │                           # Забезпечує однакове оформлення кожного кроку
│   │   │   ├── index.tsx            # Головний компонент для додавання предмета
│   │   │   │                        # Керує навігацією між кроками підвізарда
│   │   │
│   │   ├── order-params/            # Компонент загальних параметрів замовлення (Етап 3)
│   │   │   ├── model.ts             # Типи для параметрів: ExecutionParams, DiscountInfo, PaymentInfo
│   │   │   │                        # Описує структуру даних для термінів, знижок, оплати
│   │   │   ├── api.ts               # API для роботи з параметрами замовлення
│   │   │   │                        # calculateOrderTotal, validateDiscount
│   │   │   ├── lib.ts               # Утиліти для обчислення дати виконання та знижок
│   │   │   │                        # calculateExecutionDate, applyDiscount, validatePayment
│   │   │   ├── ui/                  # UI компоненти для параметрів замовлення
│   │   │   │   ├── ExecutionParams.tsx     # Компонент вибору параметрів виконання
│   │   │   │   │                           # Вибір дати та терміновості виконання
│   │   │   │   ├── DiscountSelector.tsx    # Компонент вибору типу знижки
│   │   │   │   │                           # Вибір знижки з урахуванням обмежень
│   │   │   │   ├── PaymentForm.tsx         # Форма для вибору способу оплати
│   │   │   │   │                           # Вибір методу та введення суми передоплати
│   │   │   ├── index.tsx            # Головний компонент параметрів замовлення
│   │   │   │                        # Інтегрує всі параметри та проводить фінальну валідацію
│   │   │
│   │   ├── order-receipt/           # Компонент формування квитанції (Етап 4)
│   │   │   ├── model.ts             # Типи для квитанції: Receipt, ReceiptItem, ExportFormat
│   │   │   │                        # Описує структуру даних для квитанції та експорту
│   │   │   ├── api.ts               # API для роботи з квитанцією
│   │   │   │                        # generateReceipt, finalizeOrder, exportReceipt
│   │   │   ├── lib.ts               # Утиліти для форматування даних квитанції
│   │   │   │                        # formatReceiptData, generatePdfMarkup, prepareExport
│   │   │   ├── ui/                  # UI компоненти для роботи з квитанцією
│   │   │   │   ├── ReceiptPreview.tsx      # Компонент для попереднього перегляду квитанції
│   │   │   │   │                           # Відображає всі розділи квитанції в гарному форматі
│   │   │   │   ├── ReceiptPrintButton.tsx  # Кнопка для друку квитанції
│   │   │   │   │                           # Викликає функцію друку з попереднім переглядом
│   │   │   │   ├── ReceiptExportOptions.tsx # Опції для експорту квитанції
│   │   │   │   │                           # Кнопки для експорту в PDF, DOCX, відправки на email
│   │   │   ├── index.tsx            # Головний компонент для роботи з квитанцією
│   │   │   │                        # Інтегрує перегляд, друк та експорт
│   │   │
│   ├── pages/                       # Сторінки для маршрутизації
│   │   ├── OrderWizardPage.tsx      # Головна сторінка Order Wizard
│   │   │                            # Підключає контейнер та обробляє параметри URL
│   ├── index.ts                     # Експорт публічного API всієї фічі
```


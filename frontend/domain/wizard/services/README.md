# Order Wizard Services - Доменно-орієнтована архітектура

## Огляд

Сервіси Order Wizard організовані за принципом "DDD inside, FSD outside" з фокусом на реальні етапи бізнес-процесу замість технічних аспектів.

## Архітектурний підхід

Замість технічного розділення (validation, cache, calculation), структура відображає реальні етапи Order Wizard з документації:

```
services/
├── stage-1-client-and-order-info/    # Етап 1: Клієнт та базова інформація
├── stage-2-item-management/          # Етап 2: Менеджер предметів (циклічний)
├── stage-3-order-configuration/      # Етап 3: Загальні параметри замовлення
├── stage-4-order-finalization/       # Етап 4: Підтвердження та завершення
└── shared/                           # Спільні компоненти
```

## Етапи Order Wizard

### Етап 1: Клієнт та базова інформація замовлення

- **client-management/**: Пошук, створення, редагування клієнтів
- **order-initialization/**: Генерація номерів, унікальні мітки, вибір філії

### Етап 2: Менеджер предметів (найскладніший)

- **item-wizard/**: Головний екран, таблиця предметів, навігація
- **item-characteristics/**: Категорії, найменування, матеріали, кольори
- **defects-and-risks/**: Плями, дефекти, ризики, примітки
- **price-calculation/**: Базові ціни, модифікатори, інтерактивні розрахунки
- **photo-management/**: Зйомка, завантаження, оптимізація фото

### Етап 3: Загальні параметри замовлення

- **completion-date/**: Дати виконання, терміновість, автоматичні розрахунки
- **discount-management/**: Типи знижок, валідація, обмеження по категоріях
- **payment-configuration/**: Способи оплати, передоплата, розрахунок боргу

### Етап 4: Підтвердження та завершення

- **order-review/**: Повний підсумок, деталізація розрахунків
- **legal-agreement/**: Згода з умовами, цифрові підписи
- **receipt-generation/**: Генерація квитанцій, друк, відправлення PDF

### Спільні компоненти

- **types/**: Загальні типи даних для всіх етапів
- **interfaces/**: Базові інтерфейси та контракти
- **constants/**: Бізнес-константи, налаштування, повідомлення
- **utils/**: Утилітарні функції, валідація, форматування

## Структура кожного підетапу

```
підетап/
├── services/     # Бізнес-логіка та доменні сервіси
├── interfaces/   # Інтерфейси для сервісів
├── types/        # Специфічні типи даних
└── index.ts      # Публічне API підетапу
```

## Принципи організації

### 1. Доменно-орієнтований підхід

- Структура відображає реальні бізнес-процеси
- Кожен етап відповідає кроку в Order Wizard
- Логіка організована за функціональними областями

### 2. Модульність та інкапсуляція

- Кожен підетап має власне публічне API
- Чіткі межі між різними функціональними областями
- Можливість незалежного розвитку кожного модуля

### 3. SOLID принципи

- **Single Responsibility**: кожен сервіс має одну відповідальність
- **Open/Closed**: розширення без модифікації існуючого коду
- **Liskov Substitution**: правильне використання наслідування
- **Interface Segregation**: малі, специфічні інтерфейси
- **Dependency Inversion**: залежність від абстракцій

### 4. Типізація та контракти

- Строга типізація на всіх рівнях
- Чіткі контракти між модулями
- Валідація даних на межах модулів

## Переваги такого підходу

### 1. Відповідність бізнес-логіці

- Код відображає реальні процеси хімчистки
- Легко зрозуміти зв'язок між кодом та бізнес-вимогами
- Простіше вносити зміни в бізнес-процеси

### 2. Зручність розробки

- Розробники працюють з знайомими бізнес-концепціями
- Легше орієнтуватися в коді
- Простіше додавати нову функціональність

### 3. Тестування та підтримка

- Можливість тестувати кожен етап окремо
- Легше локалізувати проблеми
- Простіше рефакторити окремі частини

### 4. Масштабованість

- Можливість розширювати окремі етапи
- Додавання нових підетапів без впливу на інші
- Гнучкість в зміні бізнес-логіки

## Міграція з попередньої структури

Попередня технічна структура (validation, cache, calculation) була замінена на доменно-орієнтовану для кращого відображення реальних бізнес-процесів та спрощення розробки і підтримки.

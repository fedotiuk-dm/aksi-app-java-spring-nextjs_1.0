# Етап 3: Загальні параметри замовлення

## Призначення

Третій етап Order Wizard відповідає за:

- Налаштування параметрів виконання замовлення
- Управління знижками та надбавками
- Конфігурацію способів оплати
- Додаткову інформацію до замовлення

## Підетапи

### 3.1. Completion Date (completion-date/)

Параметри виконання:

- Вибір дати виконання через календар
- Автоматичний розрахунок термінів на основі категорій предметів
- Управління терміновим виконанням (+50%/+100%)
- Автоматичний перерахунок дати при зміні терміновості

### 3.2. Discount Management (discount-management/)

Управління знижками:

- Типи знижок (Еверкард, Соцмережі, ЗСУ, Інше)
- Валідація застосування знижок (не діють на прання, прасування, фарбування)
- Автоматичне виключення неприйнятних категорій
- Відображення попереджень про обмеження

### 3.3. Payment Configuration (payment-configuration/)

Конфігурація оплати:

- Способи оплати (Термінал, Готівка, На рахунок)
- Розрахунок загальної вартості з урахуванням знижок/надбавок
- Управління передоплатою
- Автоматичний розрахунок боргу

## Структура кожного підетапу

```
підетап/
├── services/     # Бізнес-логіка
├── interfaces/   # Інтерфейси сервісів
└── types/        # Типи даних
```

## Особливості етапу

- **Глобальні налаштування**: впливають на все замовлення
- **Складна валідація**: знижки мають обмеження по категоріях
- **Автоматичні розрахунки**: перерахунок при зміні параметрів
- **Фінансова логіка**: точні розрахунки з урахуванням всіх факторів

## Взаємодія з іншими етапами

- Отримує список предметів та їх вартість з Етапу 2
- Застосовує глобальні модифікатори до загальної суми
- Передає фінальну конфігурацію замовлення до Етапу 4
- Використовує спільні сервіси для валідації та розрахунків

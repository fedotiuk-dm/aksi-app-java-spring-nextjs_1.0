# Етап 4: Підтвердження та завершення з формуванням квитанції

## Призначення

Фінальний етап Order Wizard відповідає за:

- Перегляд та підтвердження замовлення
- Юридичні аспекти та підписи
- Генерацію та друк квитанції
- Завершення процесу оформлення

## Підетапи

### 4.1. Order Review (order-review/)

Перегляд замовлення:

- Повний підсумок замовлення з деталізацією
- Інформація про клієнта та предмети
- Детальний розрахунок вартості для кожного предмета
- Загальний розрахунок з урахуванням знижок та терміновості
- Відображення дати виконання

### 4.2. Legal Agreement (legal-agreement/)

Юридичні аспекти:

- Чекбокс згоди з умовами надання послуг
- Посилання на державні документи
- Цифровий підпис клієнта на сенсорному екрані
- Функції очищення та збереження підпису

### 4.3. Receipt Generation (receipt-generation/)

Формування квитанції:

- Автоматичне генерування на основі всієї інформації
- Структурована квитанція з повною деталізацією
- Опції друку (два примірники)
- Відправлення PDF на email
- Можливість повторного друку

## Структура кожного підетапу

```
підетап/
├── services/     # Бізнес-логіка
├── interfaces/   # Інтерфейси сервісів
└── types/        # Типи даних
```

## Структура квитанції

- **Шапка**: логотип, юридична інформація, контакти
- **Інформація про замовлення**: номери, дати, філія, оператор
- **Клієнт**: ПІБ, контакти, адреса
- **Предмети**: детальна таблиця з розрахунками
- **Забруднення та дефекти**: повний перелік
- **Фінанси**: прозорий розрахунок з деталізацією
- **Юридична інформація**: умови, обмеження, ризики
- **Підписи**: місця для підписів клієнта та оператора
- **Колонтитул**: контакти, графік, QR-код

## Особливості етапу

- **Фінальна валідація**: перевірка всіх даних перед збереженням
- **Юридична відповідальність**: оформлення згоди та підписів
- **Професійна документація**: повна квитанція з деталізацією
- **Завершення процесу**: збереження замовлення та перехід до нового

## Взаємодія з іншими етапами

- Отримує повну інформацію з усіх попередніх етапів
- Формує фінальний документ на основі всіх даних
- Зберігає замовлення в базі даних
- Ініціює новий цикл Order Wizard

# Етап 3: Менеджер предметів (циклічний процес)

## Опис етапу

Третій етап Order Wizard - найскладніший, відповідає за:

- Управління списком предметів у замовленні
- Циклічний процес додавання предметів через підвізард
- Розрахунок цін з урахуванням модифікаторів
- Фотодокументацію предметів

## Основні хуки

### `useItemManager`

**Відповідальність:** Управління списком предметів

- CRUD операції з предметами в замовленні
- Розрахунок загальної вартості замовлення
- Валідація мінімальної кількості предметів

**Делегування:** `ItemManagementService`

### `useItemWizard`

**Відповідальність:** Підвізард створення предмета

- Навігація між підетапами створення предмета
- Збереження проміжних даних
- Валідація готовності до завершення

**Делегування:** `ItemWizardService`

## Хуки підетапів створення предмета

### `useItemBasicInfo`

**Відповідальність:** Підетап 2.1 - Основна інформація

- Вибір категорії послуги
- Вибір найменування виробу
- Встановлення одиниці виміру та кількості

### `useItemCharacteristics`

**Відповідальність:** Підетап 2.2 - Характеристики

- Вибір матеріалу
- Вибір кольору
- Встановлення наповнювача
- Встановлення ступеня зносу

### `useItemDefectsAndStains`

**Відповідальність:** Підетап 2.3 - Забруднення та дефекти

- Управління списком плям
- Управління списком дефектів та ризиків
- Додавання приміток щодо дефектів

### `useItemPricingCalculator`

**Відповідальність:** Підетап 2.4 - Калькулятор ціни

- Розрахунок базової ціни
- Застосування коефіцієнтів та модифікаторів
- Інтерактивний розрахунок з деталізацією

**Делегування:** `PricingCalculationService`

### `useItemPhotos`

**Відповідальність:** Підетап 2.5 - Фотодокументація

- Зйомка з камери планшета
- Завантаження з галереї
- Управління списком фото
- Стиснення зображень

## Композиційний хук

### `useItemManagementStep`

**Відповідальність:** Координація всього етапу

- Об'єднання функціональності менеджера та підвізарда
- Управління переходом до наступного етапу
- Валідація готовності до переходу

## Інтеграція з доменом

- **Zustand Store:** `orderItems`, `currentItem`, `itemWizardState`
- **Навігація:** `useWizardNavigation` + внутрішня навігація підвізарда
- **Валідація:** Zod схеми для кожного підетапу
- **API:** `PriceListAdapter`, `FileUploadAdapter`
- **Сервіси:** `PricingCalculationService`, `ItemManagementService`

# Combined user paths
/api/users/me:
  get:
    tags:
      - users
    summary: Отримання інформації про поточного користувача
    description: Повертає інформацію про автентифікованого користувача (оператора)
    operationId: getCurrentUser
    responses:
      "200":
        description: Інформація про користувача
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/UserResponse"
            example:
              id: "123e4567-e89b-12d3-a456-426614174000"
              username: "operator1"
              email: "operator@aksi.com"
              firstName: "Олександр"
              lastName: "Петренко"
              role: "OPERATOR"
              isActive: true
              createdAt: "2024-01-15T10:30:00Z"
              branchId: "456e7890-e89b-12d3-a456-426614174000"
      "401":
        description: Невалідний або відсутній токен
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
            example:
              message: "Токен автентифікації недійсний"
              code: "INVALID_TOKEN"
              timestamp: "2024-01-15T10:30:00Z"
      "403":
        description: Користувач неактивний
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
            example:
              message: "Користувач неактивний"
              code: "USER_INACTIVE"
              timestamp: "2024-01-15T10:30:00Z"
      "500":
        description: Внутрішня помилка сервера
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"

/api/users:
  get:
    tags:
      - users
    summary: Отримання списку користувачів
    description: Повертає список всіх користувачів системи з пагінацією (доступно тільки для адміністраторів)
    operationId: getUsers
    parameters:
      - name: page
        in: query
        description: Номер сторінки (0-based)
        required: false
        schema:
          type: integer
          format: int32
          default: 0
          minimum: 0
      - name: size
        in: query
        description: Розмір сторінки
        required: false
        schema:
          type: integer
          format: int32
          default: 20
          minimum: 1
          maximum: 100
      - name: branchId
        in: query
        description: Фільтр за ID філії
        required: false
        schema:
          type: string
          format: uuid
      - name: role
        in: query
        description: Фільтр за роллю
        required: false
        schema:
          $ref: "../../user-api.yaml#/components/schemas/UserRole"
      - name: isActive
        in: query
        description: Фільтр за статусом активності
        required: false
        schema:
          type: boolean
    responses:
      "200":
        description: Список користувачів
        content:
          application/json:
            schema:
              $ref: "../schemas/user-responses.yaml#/UserListResponse"
      "400":
        description: Неправильні параметри запиту
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "401":
        description: Не авторизовано
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "403":
        description: Доступ заборонено
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "500":
        description: Внутрішня помилка сервера
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"

  post:
    tags:
      - users
    summary: Створення нового користувача
    description: Створює нового користувача системи (доступно тільки для адміністраторів)
    operationId: createUser
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../schemas/user-requests.yaml#/CreateUserRequest"
    responses:
      "201":
        description: Користувача створено успішно
        content:
          application/json:
            schema:
              $ref: "../schemas/user-responses.yaml#/UserResponse"
      "400":
        description: Неправильні дані запиту
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ValidationErrorResponse"
      "401":
        description: Не авторизовано
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "403":
        description: Доступ заборонено
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "409":
        description: Користувач з таким email вже існує
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "500":
        description: Внутрішня помилка сервера
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"

/api/users/{id}:
  get:
    tags:
      - users
    summary: Отримання користувача за ID
    description: Повертає детальну інформацію про користувача
    operationId: getUserById
    parameters:
      - name: id
        in: path
        required: true
        description: ID користувача
        schema:
          type: string
          format: uuid
    responses:
      "200":
        description: Інформація про користувача
        content:
          application/json:
            schema:
              $ref: "../schemas/user-responses.yaml#/UserResponse"
      "401":
        description: Не авторизовано
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "403":
        description: Доступ заборонено
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "404":
        description: Користувача не знайдено
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "500":
        description: Внутрішня помилка сервера
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"

  patch:
    tags:
      - users
    summary: Оновлення даних користувача
    description: Часткове оновлення даних користувача (доступно для адміністраторів або самого користувача)
    operationId: updateUser
    parameters:
      - name: id
        in: path
        required: true
        description: ID користувача
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../schemas/user-requests.yaml#/UpdateUserRequest"
    responses:
      "200":
        description: Дані користувача оновлено
        content:
          application/json:
            schema:
              $ref: "../schemas/user-responses.yaml#/UserResponse"
      "400":
        description: Неправильні дані запиту
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ValidationErrorResponse"
      "401":
        description: Не авторизовано
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "403":
        description: Доступ заборонено
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "404":
        description: Користувача не знайдено
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "409":
        description: Email вже використовується
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "500":
        description: Внутрішня помилка сервера
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"

/api/users/{id}/role:
  put:
    tags:
      - users
    summary: Зміна ролі користувача
    description: Змінює роль користувача (доступно тільки для адміністраторів)
    operationId: updateUserRole
    parameters:
      - name: id
        in: path
        required: true
        description: ID користувача
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../schemas/user-requests.yaml#/UpdateUserRoleRequest"
    responses:
      "200":
        description: Роль користувача змінено
        content:
          application/json:
            schema:
              $ref: "../schemas/user-responses.yaml#/UserResponse"
      "400":
        description: Неправильні дані запиту
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ValidationErrorResponse"
      "401":
        description: Не авторизовано
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "403":
        description: Доступ заборонено
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "404":
        description: Користувача не знайдено
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "500":
        description: Внутрішня помилка сервера
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"

/api/users/{id}/status:
  put:
    tags:
      - users
    summary: Зміна статусу користувача
    description: Активує або деактивує користувача (доступно тільки для адміністраторів)
    operationId: updateUserStatus
    parameters:
      - name: id
        in: path
        required: true
        description: ID користувача
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../schemas/user-requests.yaml#/UpdateUserStatusRequest"
    responses:
      "200":
        description: Статус користувача змінено
        content:
          application/json:
            schema:
              $ref: "../schemas/user-responses.yaml#/UserResponse"
      "400":
        description: Неправильні дані запиту
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ValidationErrorResponse"
      "401":
        description: Не авторизовано
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "403":
        description: Доступ заборонено
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "404":
        description: Користувача не знайдено
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "500":
        description: Внутрішня помилка сервера
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"

/api/users/{id}/password:
  put:
    tags:
      - users
    summary: Зміна пароля користувача
    description: Змінює пароль користувача (доступно для адміністраторів або самого користувача)
    operationId: updateUserPassword
    parameters:
      - name: id
        in: path
        required: true
        description: ID користувача
        schema:
          type: string
          format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../schemas/user-requests.yaml#/ChangePasswordRequest"
    responses:
      "204":
        description: Пароль успішно змінено
      "400":
        description: Неправильні дані запиту
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ValidationErrorResponse"
      "401":
        description: Не авторизовано
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "403":
        description: Доступ заборонено
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "404":
        description: Користувача не знайдено
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
      "500":
        description: Внутрішня помилка сервера
        content:
          application/json:
            schema:
              $ref: "../../user-api.yaml#/components/schemas/ErrorResponse"
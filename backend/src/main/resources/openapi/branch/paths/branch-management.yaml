# Endpoints для управління філіями
/api/branches:
  get:
    tags:
      - branches
    summary: Отримати список філій
    description: Повертає список активних філій для вибору в дропдауні
    operationId: getBranches
    parameters:
      - name: includeInactive
        in: query
        description: Включити неактивні філії
        required: false
        schema:
          type: boolean
          default: false
    responses:
      200:
        description: Список філій
        content:
          application/json:
            schema:
              $ref: "../../branch-api.yaml#/components/schemas/BranchListResponse"
      401:
        $ref: "#/components/responses/UnauthorizedError"
      500:
        $ref: "#/components/responses/InternalServerError"

  post:
    tags:
      - branches
    summary: Створити нову філію
    description: Створює нову філію хімчистки (доступно тільки для адміністраторів)
    operationId: createBranch
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../../branch-api.yaml#/components/schemas/CreateBranchRequest"
    responses:
      201:
        description: Філія успішно створена
        content:
          application/json:
            schema:
              $ref: "../../branch-api.yaml#/components/schemas/BranchResponse"
      400:
        $ref: "#/components/responses/BadRequestError"
      401:
        $ref: "#/components/responses/UnauthorizedError"
      403:
        $ref: "#/components/responses/ForbiddenError"
      500:
        $ref: "#/components/responses/InternalServerError"

/api/branches/{id}:
  get:
    tags:
      - branches
    summary: Отримати філію за ID
    description: Повертає детальну інформацію про філію
    operationId: getBranchById
    parameters:
      - $ref: "../../common/parameters/path.yaml#/IdParam"
    responses:
      200:
        description: Інформація про філію
        content:
          application/json:
            schema:
              $ref: "../../branch-api.yaml#/components/schemas/BranchResponse"
      401:
        $ref: "#/components/responses/UnauthorizedError"
      404:
        $ref: "#/components/responses/BranchNotFoundError"
      500:
        $ref: "#/components/responses/InternalServerError"

  patch:
    tags:
      - branches
    summary: Оновити філію
    description: Часткове оновлення інформації про філію (доступно тільки для адміністраторів)
    operationId: updateBranch
    parameters:
      - $ref: "../../common/parameters/path.yaml#/IdParam"
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../../branch-api.yaml#/components/schemas/UpdateBranchRequest"
    responses:
      200:
        description: Філія успішно оновлена
        content:
          application/json:
            schema:
              $ref: "../../branch-api.yaml#/components/schemas/BranchResponse"
      400:
        $ref: "#/components/responses/BadRequestError"
      401:
        $ref: "#/components/responses/UnauthorizedError"
      403:
        $ref: "#/components/responses/ForbiddenError"
      404:
        $ref: "#/components/responses/BranchNotFoundError"
      500:
        $ref: "#/components/responses/InternalServerError"

components:
  responses:
    UnauthorizedError:
      description: Невалідний або відсутній токен
      content:
        application/json:
          schema:
            $ref: "../../branch-api.yaml#/components/schemas/ErrorResponse"
          example:
            message: "Токен автентифікації недійсний"
            code: "INVALID_TOKEN"
            timestamp: "2024-01-15T10:30:00Z"
    
    ForbiddenError:
      description: Недостатньо прав доступу
      content:
        application/json:
          schema:
            $ref: "../../branch-api.yaml#/components/schemas/ErrorResponse"
          example:
            message: "Недостатньо прав для виконання операції"
            code: "ACCESS_DENIED"
            timestamp: "2024-01-15T10:30:00Z"
    
    BadRequestError:
      description: Невалідні дані запиту
      content:
        application/json:
          schema:
            $ref: "../../branch-api.yaml#/components/schemas/ValidationErrorResponse"
    
    BranchNotFoundError:
      description: Філія не знайдена
      content:
        application/json:
          schema:
            $ref: "../../branch-api.yaml#/components/schemas/ErrorResponse"
          example:
            message: "Філія не знайдена"
            code: "BRANCH_NOT_FOUND"
            timestamp: "2024-01-15T10:30:00Z"
    
    InternalServerError:
      description: Внутрішня помилка сервера
      content:
        application/json:
          schema:
            $ref: "../../branch-api.yaml#/components/schemas/ErrorResponse"
# Endpoints для статистики філій
/api/branches/{id}/statistics:
  get:
    tags:
      - branch-statistics
    summary: Отримати статистику філії
    description: Повертає статистику замовлень та доходів для конкретної філії
    parameters:
      - $ref: "../../common/parameters/path.yaml#/BranchIdParam"
      - name: startDate
        in: query
        description: Початкова дата періоду
        required: true
        schema:
          type: string
          format: date
      - name: endDate
        in: query
        description: Кінцева дата періоду
        required: true
        schema:
          type: string
          format: date
    responses:
      200:
        description: Статистика філії
        content:
          application/json:
            schema:
              $ref: "../schemas/branch-responses.yaml#/BranchStatisticsResponse"
      400:
        description: Помилка валідації дат
        content:
          application/json:
            schema:
              $ref: "../../common/schemas/errors.yaml#/ValidationErrorResponse"
      404:
        description: Філія не знайдена
        content:
          application/json:
            schema:
              $ref: "../../common/schemas/errors.yaml#/ErrorResponse"
    operationId: getBranchStatistics

/api/branches/statistics/compare:
  get:
    tags:
      - branch-statistics
    summary: Порівняти статистику філій
    description: Повертає порівняльну статистику всіх філій за період
    parameters:
      - name: startDate
        in: query
        description: Початкова дата періоду
        required: true
        schema:
          type: string
          format: date
      - name: endDate
        in: query
        description: Кінцева дата періоду
        required: true
        schema:
          type: string
          format: date
      - name: city
        in: query
        description: Фільтр за містом
        required: false
        schema:
          type: string
      - name: sortBy
        in: query
        description: Поле для сортування
        required: false
        schema:
          type: string
          enum:
            - revenue
            - orders
            - averageOrder
          default: revenue
      - name: order
        in: query
        description: Порядок сортування
        required: false
        schema:
          type: string
          enum:
            - asc
            - desc
          default: desc
    responses:
      200:
        description: Порівняльна статистика філій
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "../schemas/branch-responses.yaml#/BranchComparisonResponse"
      400:
        description: Помилка валідації дат
        content:
          application/json:
            schema:
              $ref: "../../common/schemas/errors.yaml#/ValidationErrorResponse"
    operationId: compareBranchStatistics

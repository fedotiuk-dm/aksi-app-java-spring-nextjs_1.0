# Response схеми для Branch домену
BranchResponse:
  type: object
  title: BranchResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
      nullable: false
    code:
      type: string
      description: Унікальний код філії
      example: AKSI-01
      nullable: false
    name:
      type: string
      description: Назва філії
      example: Хімчистка AKSI - Центр
      nullable: false
    description:
      type: string
      description: Опис розташування
      nullable: false
    address:
      $ref: "../../common/schemas/address.yaml#/Address"
      nullable: false
    contactInfo:
      $ref: "#/ContactInfoResponse"
      nullable: false
    coordinates:
      $ref: "#/CoordinatesResponse"
    status:
      $ref: "../schemas/branch-enums.yaml#/BranchStatus"
    workingSchedule:
      $ref: "#/WorkingScheduleResponse"
    receiptCounter:
      type: integer
      format: int64
      description: Поточний лічильник квитанцій
      nullable: false
  allOf:
    - $ref: "../../common/schemas/base.yaml#/TimestampProperties"

BranchWithDistanceResponse:
  allOf:
    - $ref: "#/BranchResponse"
    - type: object
      properties:
        distance:
          type: number
          format: double
          description: Відстань в кілометрах
          example: 2.5

ContactInfoResponse:
  type: object
  title: ContactInfoResponse
  properties:
    phone:
      type: string
      description: Основний телефон
      nullable: false
    alternativePhone:
      type: string
      description: Додатковий телефон
    email:
      type: string
      description: Email філії
      nullable: false
    managerName:
      type: string
      description: Ім'я менеджера
      nullable: false

CoordinatesResponse:
  type: object
  title: CoordinatesResponse
  properties:
    latitude:
      type: number
      format: double
      description: Широта
    longitude:
      type: number
      format: double
      description: Довгота
    mapUrl:
      type: string
      format: uri
      description: Посилання на карту

WorkingScheduleResponse:
  type: object
  title: WorkingScheduleResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    branchId:
      $ref: "../../common/schemas/base.yaml#/UUID"
    workingDays:
      type: array
      items:
        $ref: "#/WorkingDayResponse"
    holidays:
      type: array
      items:
        $ref: "#/HolidayResponse"
    timezone:
      type: string
      description: Часовий пояс

WorkingDayResponse:
  type: object
  title: WorkingDayResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
      nullable: false
    dayOfWeek:
      $ref: "../schemas/branch-enums.yaml#/DayOfWeek"
    openTime:
      type: string
      format: time
      description: Час відкриття
      nullable: false
    closeTime:
      type: string
      format: time
      description: Час закриття
      nullable: false
    isWorkingDay:
      type: boolean
      description: Чи є день робочим
      nullable: false
    notes:
      type: string
      description: Примітки до дня
      nullable: false

HolidayResponse:
  type: object
  title: HolidayResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
      nullable: false
    date:
      $ref: "../../common/schemas/base.yaml#/Date"
      description: Дата свята
      nullable: false
    name:
      type: string
      description: Назва свята
      nullable: false
    isRecurring:
      type: boolean
      description: Чи повторюється щороку
      nullable: false

BranchOpenStatusResponse:
  type: object
  title: BranchOpenStatusResponse
  properties:
    branchId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      nullable: false
    isOpen:
      type: boolean
      description: Чи відкрита філія зараз
      nullable: false
    checkDateTime:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
      description: Час перевірки
      nullable: false
    currentStatus:
      $ref: "../schemas/branch-enums.yaml#/BranchOpenStatus"
      description: Поточний статус
      nullable: false
    nextOpenTime:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
      description: Наступний час відкриття (якщо зачинена)
    todaySchedule:
      $ref: "#/WorkingDayResponse"

NextWorkingDayResponse:
  type: object
  title: NextWorkingDayResponse
  properties:
    branchId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      nullable: false
    nextWorkingDate:
      $ref: "../../common/schemas/base.yaml#/Date"
      description: Наступна робоча дата
    workingHours:
      $ref: "#/WorkingHoursInfo"
      description: Робочі години філії
    daysUntilNextWorking:
      type: integer
      description: Кількість днів до наступного робочого дня

ReceiptNumberResponse:
  type: object
  title: ReceiptNumberResponse
  properties:
    receiptNumber:
      type: string
      description: Згенерований номер квитанції
      example: AKSI-01-2024-000001
    branchId:
      $ref: "../../common/schemas/base.yaml#/UUID"
    branchCode:
      type: string
      example: AKSI-01
    year:
      type: integer
      example: 2024
    sequenceNumber:
      type: integer
      example: 1
    generatedAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"

ReceiptValidationResponse:
  type: object
  title: ReceiptValidationResponse
  properties:
    receiptNumber:
      type: string
      description: Перевірений номер
    isValid:
      type: boolean
      description: Чи правильний формат
    errors:
      type: array
      items:
        type: string
      description: Список помилок (якщо є)
    branchCode:
      type: string
      description: Код філії (якщо валідний)

ReceiptNumberParseResponse:
  type: object
  title: ReceiptNumberParseResponse
  properties:
    receiptNumber:
      type: string
      description: Оригінальний номер
    branchCode:
      type: string
      description: Код філії
      example: AKSI-01
    year:
      type: integer
      description: Рік
      example: 2024
    sequenceNumber:
      type: integer
      description: Порядковий номер
      example: 1
    branchInfo:
      $ref: "#/BranchSummaryResponse"

BranchSummaryResponse:
  type: object
  title: BranchSummaryResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    code:
      type: string
    name:
      type: string
    city:
      type: string

# Statistics Responses
BranchStatisticsResponse:
  type: object
  title: BranchStatisticsResponse
  properties:
    branchId:
      $ref: "../../common/schemas/base.yaml#/UUID"
    branchName:
      type: string
    period:
      $ref: "#/StatisticsPeriod"
      description: Період статистики
    ordersCount:
      type: integer
      format: int64
      description: Кількість замовлень
    totalRevenue:
      $ref: "../../common/schemas/base.yaml#/Money"
      description: Загальний дохід
    averageOrderValue:
      $ref: "../../common/schemas/base.yaml#/Money"
      description: Середня вартість замовлення
    popularServices:
      type: array
      items:
        $ref: "#/ServiceStatisticResponse"
    dailyStats:
      type: array
      items:
        $ref: "#/DailyStatisticResponse"

ServiceStatisticResponse:
  type: object
  title: ServiceStatisticResponse
  properties:
    serviceName:
      type: string
    ordersCount:
      type: integer
    totalRevenue:
      $ref: "../../common/schemas/base.yaml#/Money"
    percentage:
      type: number
      format: double
      description: Відсоток від загального доходу

DailyStatisticResponse:
  type: object
  title: DailyStatisticResponse
  properties:
    date:
      $ref: "../../common/schemas/base.yaml#/Date"
    ordersCount:
      type: integer
    revenue:
      $ref: "../../common/schemas/base.yaml#/Money"

BranchComparisonResponse:
  type: object
  title: BranchComparisonResponse
  properties:
    branchId:
      $ref: "../../common/schemas/base.yaml#/UUID"
    branchName:
      type: string
    branchCode:
      type: string
    ordersCount:
      type: integer
      format: int64
    totalRevenue:
      $ref: "../../common/schemas/base.yaml#/Money"
    averageOrderValue:
      $ref: "../../common/schemas/base.yaml#/Money"
    ranking:
      type: integer
      description: Позиція в рейтингу

# Extracted Inline Schemas
WorkingHoursInfo:
  type: object
  title: WorkingHoursInfo
  description: Інформація про робочі години
  properties:
    openTime:
      type: string
      format: time
      description: Час відкриття
      example: "09:00"
    closeTime:
      type: string
      format: time
      description: Час закриття
      example: "18:00"

StatisticsPeriod:
  type: object
  title: StatisticsPeriod
  description: Період для статистики
  properties:
    startDate:
      $ref: "../../common/schemas/base.yaml#/Date"
      description: Дата початку періоду
    endDate:
      $ref: "../../common/schemas/base.yaml#/Date"
      description: Дата закінчення періоду

# Response схеми для Document домену

# Receipt Responses
ReceiptResponse:
  type: object
  title: ReceiptResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    orderId:
      $ref: "../../common/schemas/base.yaml#/UUID"
    receiptNumber:
      type: string
      description: Номер квитанції
      example: AKSI-01-2024-000001
    data:
      $ref: "#/ReceiptDataResponse"
    pdfDocument:
      $ref: "#/DocumentSummaryResponse"
    qrCode:
      $ref: "#/QRCodeSummaryResponse"
    signatures:
      type: array
      items:
        $ref: "#/DigitalSignatureSummaryResponse"
    isPrinted:
      type: boolean
      description: Чи роздрукована квитанція
    printedAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
    generatedAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
    generatedBy:
      type: string
      description: Хто згенерував

ReceiptDataResponse:
  type: object
  title: ReceiptDataResponse
  properties:
    companyInfo:
      $ref: "#/CompanyInfoResponse"
    branchInfo:
      $ref: "#/BranchInfoResponse"
    orderInfo:
      $ref: "#/OrderInfoResponse"
    clientInfo:
      $ref: "#/ClientInfoResponse"
    items:
      type: array
      items:
        $ref: "#/ItemDetailResponse"
    financial:
      $ref: "#/FinancialSummaryResponse"
    legalInfo:
      $ref: "#/LegalInfoResponse"
    operatorInfo:
      $ref: "#/OperatorInfoResponse"

CompanyInfoResponse:
  type: object
  title: CompanyInfoResponse
  properties:
    companyName:
      type: string
    legalName:
      type: string
    address:
      type: string
    phone:
      type: string
    email:
      type: string
    website:
      type: string
    logoUrl:
      type: string
    taxNumber:
      type: string

BranchInfoResponse:
  type: object
  title: BranchInfoResponse
  properties:
    branchId:
      $ref: "../../common/schemas/base.yaml#/UUID"
    branchCode:
      type: string
    branchName:
      type: string
    address:
      type: string
    phone:
      type: string
    managerName:
      type: string

OrderInfoResponse:
  type: object
  title: OrderInfoResponse
  properties:
    orderId:
      $ref: "../../common/schemas/base.yaml#/UUID"
    orderNumber:
      type: string
    createdAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
    expectedCompletionDate:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
    expediteType:
      $ref: "../schemas/document-enums.yaml#/ExpediteType"
    totalAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
    discountAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
    finalAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
    paidAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
    remainingAmount:
      $ref: "../../common/schemas/base.yaml#/Money"

ClientInfoResponse:
  type: object
  title: ClientInfoResponse
  properties:
    clientId:
      $ref: "../../common/schemas/base.yaml#/UUID"
    firstName:
      type: string
    lastName:
      type: string
    phone:
      type: string
    email:
      type: string
    address:
      type: string
    preferredContactMethod:
      type: string

ItemDetailResponse:
  type: object
  title: ItemDetailResponse
  properties:
    itemNumber:
      type: integer
    itemName:
      type: string
    category:
      type: string
    quantity:
      type: string
    material:
      type: string
    color:
      type: string
    filling:
      type: string
    basePrice:
      $ref: "../../common/schemas/base.yaml#/Money"
    modifiers:
      type: array
      items:
        $ref: "#/ModifierDetailResponse"
    finalPrice:
      $ref: "../../common/schemas/base.yaml#/Money"
    stains:
      type: array
      items:
        type: string
    defects:
      type: array
      items:
        type: string
    defectNotes:
      type: string
    photos:
      type: array
      items:
        $ref: "#/PhotoSummaryResponse"

ModifierDetailResponse:
  type: object
  title: ModifierDetailResponse
  properties:
    name:
      type: string
    type:
      $ref: "../schemas/document-enums.yaml#/ModifierType"
    value:
      type: number
      format: double
    appliedAmount:
      $ref: "../../common/schemas/base.yaml#/Money"

PhotoSummaryResponse:
  type: object
  title: PhotoSummaryResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    thumbnailUrl:
      type: string
      format: uri
    fullUrl:
      type: string
      format: uri

FinancialSummaryResponse:
  type: object
  title: FinancialSummaryResponse
  properties:
    subtotal:
      $ref: "../../common/schemas/base.yaml#/Money"
    discountType:
      type: string
    discountAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
    expediteCharge:
      $ref: "../../common/schemas/base.yaml#/Money"
    totalAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
    paidAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
    remainingAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
    paymentMethod:
      type: string

LegalInfoResponse:
  type: object
  title: LegalInfoResponse
  properties:
    termsAndConditions:
      type: string
    liabilityLimitations:
      type: string
    warrantyInfo:
      type: string
    acceptanceConfirmed:
      type: boolean
    acceptanceDate:
      $ref: "../../common/schemas/base.yaml#/Timestamp"

OperatorInfoResponse:
  type: object
  title: OperatorInfoResponse
  properties:
    operatorName:
      type: string
    operatorPosition:
      type: string
    operatorId:
      $ref: "../../common/schemas/base.yaml#/UUID"

# Document Responses
DocumentResponse:
  type: object
  title: DocumentResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    documentNumber:
      type: string
    type:
      $ref: "../schemas/document-enums.yaml#/DocumentType"
    relatedEntityId:
      $ref: "../../common/schemas/base.yaml#/UUID"
    fileName:
      type: string
    filePath:
      type: string
    fileSize:
      type: integer
      format: int64
    mimeType:
      type: string
    status:
      $ref: "../schemas/document-enums.yaml#/DocumentStatus"
    downloadUrl:
      type: string
      format: uri
    metadata:
      $ref: "#/DocumentMetadataResponse"
  allOf:
    - $ref: "../../common/schemas/base.yaml#/TimestampProperties"
    - type: object
      properties:
        createdBy:
          type: string

DocumentSummaryResponse:
  type: object
  title: DocumentSummaryResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    fileName:
      type: string
    fileSize:
      type: integer
      format: int64
    downloadUrl:
      type: string
      format: uri
    createdAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"

DocumentMetadataResponse:
  type: object
  title: DocumentMetadataResponse
  properties:
    template:
      type: string
    version:
      type: string
    generationTime:
      type: number
      format: double
      description: Час генерації в секундах
    pageCount:
      type: integer
      description: Кількість сторінок (для PDF)

# QR Code Responses
QRCodeResponse:
  type: object
  title: QRCodeResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    data:
      type: string
      description: Закодовані дані
    type:
      $ref: "../schemas/document-enums.yaml#/QRCodeType"
    size:
      type: integer
    format:
      $ref: "../schemas/document-enums.yaml#/QRCodeFormat"
    imageUrl:
      type: string
      format: uri
      description: URL для отримання зображення
    createdAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"

QRCodeSummaryResponse:
  type: object
  title: QRCodeSummaryResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    imageUrl:
      type: string
      format: uri
    size:
      type: integer

# Digital Signature Responses
DigitalSignatureResponse:
  type: object
  title: DigitalSignatureResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    documentId:
      $ref: "../../common/schemas/base.yaml#/UUID"
    type:
      $ref: "../schemas/document-enums.yaml#/SignatureType"
    signerName:
      type: string
    signerRole:
      type: string
    signedAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
    ipAddress:
      type: string
    imageUrl:
      type: string
      format: uri
      description: URL для отримання зображення підпису
    metadata:
      $ref: "#/SignatureMetadataResponse"
    isValid:
      type: boolean
      description: Чи валідний підпис

DigitalSignatureSummaryResponse:
  type: object
  title: DigitalSignatureSummaryResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    type:
      $ref: "../schemas/document-enums.yaml#/SignatureType"
    signerName:
      type: string
    signedAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
    imageUrl:
      type: string
      format: uri

SignatureMetadataResponse:
  type: object
  title: SignatureMetadataResponse
  properties:
    deviceInfo:
      type: string
    browserInfo:
      type: string
    screenResolution:
      type: string
    signatureMethod:
      $ref: "../schemas/document-enums.yaml#/SignatureMethod"
    signatureDuration:
      type: number
      format: double
      description: Час створення підпису в секундах

# Page Responses
ReceiptPageResponse:
  type: object
  title: ReceiptPageResponse
  properties:
    content:
      type: array
      items:
        $ref: "#/ReceiptResponse"
    pageable:
      $ref: "../../common/schemas/pagination.yaml#/PageableInfo"
    totalElements:
      type: integer
      format: int64
    totalPages:
      type: integer
    last:
      type: boolean
    first:
      type: boolean
    numberOfElements:
      type: integer

DocumentPageResponse:
  type: object
  title: DocumentPageResponse
  properties:
    content:
      type: array
      items:
        $ref: "#/DocumentResponse"
    pageable:
      $ref: "../../common/schemas/pagination.yaml#/PageableInfo"
    totalElements:
      type: integer
      format: int64
    totalPages:
      type: integer
    last:
      type: boolean
    first:
      type: boolean
    numberOfElements:
      type: integer

# PDF Generation Responses
PdfGenerationResponse:
  type: object
  title: PdfGenerationResponse
  description: Відповідь з інформацією про згенерований PDF файл
  properties:
    documentId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      description: Ідентифікатор документа
    filename:
      type: string
      description: Ім'я файлу
      example: "receipt-AKSI-01-2024-000001.pdf"
    size:
      type: integer
      description: Розмір файлу в байтах
      example: 245760
    downloadUrl:
      type: string
      format: uri
      description: URL для завантаження PDF
      example: "/api/documents/550e8400-e29b-41d4-a716-446655440000/download"

# QR Code Binary Response
QrCodeBinaryResponse:
  type: object
  title: QrCodeBinaryResponse
  description: Відповідь з інформацією про QR код для завантаження
  properties:
    qrCodeId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      description: Ідентифікатор QR коду
    format:
      $ref: "../schemas/document-enums.yaml#/QRCodeFormat"
      description: Формат зображення
    size:
      type: integer
      description: Розмір зображення в пікселях
      example: 256
    downloadUrl:
      type: string
      format: uri
      description: URL для завантаження зображення
      example: "/api/qr-codes/550e8400-e29b-41d4-a716-446655440000?format=PNG&size=256"

# Digital Signature Image Response
SignatureImageResponse:
  type: object
  title: SignatureImageResponse
  description: Відповідь з інформацією про зображення цифрового підпису
  properties:
    url:
      type: string
      format: uri
      description: URL для завантаження зображення підпису
      example: "http://localhost:8080/api/digital-signatures/550e8400-e29b-41d4-a716-446655440000/image?format=PNG"
    format:
      type: string
      enum: [PNG, SVG]
      description: Формат зображення
      example: "PNG"
    filename:
      type: string
      description: Ім'я файлу для завантаження
      example: "signature-550e8400-e29b-41d4-a716-446655440000.png"
    size:
      type: integer
      description: Розмір файлу в байтах
      example: 5120
    dimensions:
      type: object
      title: ImageDimensions
      properties:
        width:
          type: integer
          description: Ширина зображення в пікселях
          example: 200
        height:
          type: integer
          description: Висота зображення в пікселях
          example: 100

# Signature Validation Response
SignatureValidationResponse:
  type: object
  title: SignatureValidationResponse
  description: Результат валідації цифрового підпису
  properties:
    isValid:
      type: boolean
      description: Чи валідний підпис
      example: true
    validationDetails:
      type: object
      title: ValidationDetails
      description: Детальна інформація про валідацію
      properties:
        signatureIntact:
          type: boolean
          description: Чи цілісний підпис
          example: true
        documentMatches:
          type: boolean
          description: Чи відповідає документу
          example: true
        notExpired:
          type: boolean
          description: Чи не прострочений
          example: true
        signerVerified:
          type: boolean
          description: Чи підтверджений підписант
          example: true

# Document Download Response
DocumentDownloadResponse:
  type: object
  title: DocumentDownloadResponse
  description: Відповідь з інформацією для завантаження документа
  properties:
    documentId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      description: Ідентифікатор документа
    filename:
      type: string
      description: Ім'я файлу
      example: "document.pdf"
    contentType:
      type: string
      description: MIME тип файлу
      example: "application/pdf"
    size:
      type: integer
      description: Розмір файлу в байтах
      example: 1048576
    downloadUrl:
      type: string
      format: uri
      description: URL для завантаження файлу
      example: "/api/documents/550e8400-e29b-41d4-a716-446655440000/download"

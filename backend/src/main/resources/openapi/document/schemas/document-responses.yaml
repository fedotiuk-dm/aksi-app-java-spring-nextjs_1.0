# Response схеми для Document домену

# Receipt Responses
ReceiptResponse:
  type: object
  title: ReceiptResponse
  required:
    - id
    - orderId
    - receiptNumber
    - data
    - isPrinted
    - generatedAt
    - generatedBy
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
      nullable: false
    orderId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      nullable: false
    receiptNumber:
      type: string
      nullable: false
      description: Номер квитанції
      example: AKSI-01-2024-000001
    data:
      $ref: "#/ReceiptDataResponse"
      nullable: false
    pdfDocument:
      $ref: "#/DocumentSummaryResponse"
      nullable: false
    qrCode:
      $ref: "#/QRCodeSummaryResponse"
      nullable: false
    signatures:
      type: array
      nullable: false
      items:
        $ref: "#/DigitalSignatureSummaryResponse"
    isPrinted:
      type: boolean
      nullable: false
      description: Чи роздрукована квитанція
    printedAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
      nullable: false
    generatedAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
      nullable: false
    generatedBy:
      type: string
      nullable: false
      description: Хто згенерував

ReceiptDataResponse:
  type: object
  title: ReceiptDataResponse
  required:
    - companyInfo
    - branchInfo
    - orderInfo
    - clientInfo
    - items
    - financial
    - legalInfo
    - operatorInfo
  properties:
    companyInfo:
      $ref: "#/CompanyInfoResponse"
      nullable: false
    branchInfo:
      $ref: "#/BranchInfoResponse"
      nullable: false
    orderInfo:
      $ref: "#/OrderInfoResponse"
      nullable: false
    clientInfo:
      $ref: "#/ClientInfoResponse"
      nullable: false
    items:
      type: array
      nullable: false
      items:
        $ref: "#/ItemDetailResponse"
    financial:
      $ref: "#/FinancialSummaryResponse"
      nullable: false
    legalInfo:
      $ref: "#/LegalInfoResponse"
      nullable: false
    operatorInfo:
      $ref: "#/OperatorInfoResponse"
      nullable: false

CompanyInfoResponse:
  type: object
  title: CompanyInfoResponse
  required:
    - companyName
    - legalName
    - address
    - phone
    - email
    - taxNumber
  properties:
    companyName:
      type: string
      nullable: false
    legalName:
      type: string
      nullable: false
    address:
      type: string
      nullable: false
    phone:
      type: string
      nullable: false
    email:
      type: string
      nullable: false
    website:
      type: string
      nullable: false
    logoUrl:
      type: string
      nullable: false
    taxNumber:
      type: string
      nullable: false

BranchInfoResponse:
  type: object
  title: BranchInfoResponse
  required:
    - branchId
    - branchCode
    - branchName
    - address
    - phone
    - managerName
  properties:
    branchId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      nullable: false
    branchCode:
      type: string
      nullable: false
    branchName:
      type: string
      nullable: false
    address:
      type: string
      nullable: false
    phone:
      type: string
      nullable: false
    managerName:
      type: string
      nullable: false

OrderInfoResponse:
  type: object
  title: OrderInfoResponse
  required:
    - orderId
    - orderNumber
    - createdAt
    - expectedCompletionDate
    - expediteType
    - totalAmount
    - discountAmount
    - finalAmount
    - paidAmount
    - remainingAmount
  properties:
    orderId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      nullable: false
    orderNumber:
      type: string
      nullable: false
    createdAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
      nullable: false
    expectedCompletionDate:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
      nullable: false
    expediteType:
      $ref: "../schemas/document-enums.yaml#/ExpediteType"
      nullable: false
    totalAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
      nullable: false
    discountAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
      nullable: false
    finalAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
      nullable: false
    paidAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
      nullable: false
    remainingAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
      nullable: false

ClientInfoResponse:
  type: object
  title: ClientInfoResponse
  required:
    - clientId
    - firstName
    - lastName
    - phone
    - preferredContactMethod
  properties:
    clientId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      nullable: false
    firstName:
      type: string
      nullable: false
    lastName:
      type: string
      nullable: false
    phone:
      type: string
      nullable: false
    email:
      type: string
      nullable: false
    address:
      type: string
      nullable: false
    preferredContactMethod:
      type: string
      nullable: false

ItemDetailResponse:
  type: object
  title: ItemDetailResponse
  required:
    - itemNumber
    - itemName
    - category
    - quantity
    - material
    - color
    - basePrice
    - modifiers
    - finalPrice
    - stains
    - defects
    - photos
  properties:
    itemNumber:
      type: integer
      nullable: false
    itemName:
      type: string
      nullable: false
    category:
      type: string
      nullable: false
    quantity:
      type: string
      nullable: false
    material:
      type: string
      nullable: false
    color:
      $ref: "../../item/schemas/item-enums.yaml#/ItemColor"
      nullable: false
    customColor:
      type: string
      description: Кастомний колір (має значення тільки якщо color = OTHER)
      nullable: true
    filling:
      type: string
      nullable: false
    basePrice:
      $ref: "../../common/schemas/base.yaml#/Money"
      nullable: false
    modifiers:
      type: array
      nullable: false
      items:
        $ref: "#/ModifierDetailResponse"
    finalPrice:
      $ref: "../../common/schemas/base.yaml#/Money"
      nullable: false
    stains:
      type: array
      nullable: false
      items:
        type: string
    defects:
      type: array
      nullable: false
      items:
        type: string
    defectNotes:
      type: string
      nullable: false
    photos:
      type: array
      nullable: false
      items:
        $ref: "#/PhotoSummaryResponse"

ModifierDetailResponse:
  type: object
  title: ModifierDetailResponse
  properties:
    name:
      type: string
    type:
      $ref: "../schemas/document-enums.yaml#/ModifierType"
    value:
      type: number
      format: double
    appliedAmount:
      $ref: "../../common/schemas/base.yaml#/Money"

PhotoSummaryResponse:
  type: object
  title: PhotoSummaryResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    thumbnailUrl:
      type: string
      format: uri
    fullUrl:
      type: string
      format: uri

FinancialSummaryResponse:
  type: object
  title: FinancialSummaryResponse
  properties:
    subtotal:
      $ref: "../../common/schemas/base.yaml#/Money"
    discountType:
      type: string
    discountAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
    expediteCharge:
      $ref: "../../common/schemas/base.yaml#/Money"
    totalAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
    paidAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
    remainingAmount:
      $ref: "../../common/schemas/base.yaml#/Money"
    paymentMethod:
      type: string

LegalInfoResponse:
  type: object
  title: LegalInfoResponse
  properties:
    termsAndConditions:
      type: string
    liabilityLimitations:
      type: string
    warrantyInfo:
      type: string
    acceptanceConfirmed:
      type: boolean
    acceptanceDate:
      $ref: "../../common/schemas/base.yaml#/Timestamp"

OperatorInfoResponse:
  type: object
  title: OperatorInfoResponse
  properties:
    operatorName:
      type: string
    operatorPosition:
      type: string
    operatorId:
      $ref: "../../common/schemas/base.yaml#/UUID"

# Document Responses
DocumentResponse:
  type: object
  title: DocumentResponse
  required:
    - id
    - documentNumber
    - type
    - relatedEntityId
    - fileName
    - filePath
    - fileSize
    - mimeType
    - status
    - downloadUrl
    - metadata
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
      nullable: false
    documentNumber:
      type: string
      nullable: false
    type:
      $ref: "../schemas/document-enums.yaml#/DocumentType"
      nullable: false
    relatedEntityId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      nullable: false
    fileName:
      type: string
      nullable: false
    filePath:
      type: string
      nullable: false
    fileSize:
      type: integer
      format: int64
      nullable: false
    mimeType:
      type: string
      nullable: false
    status:
      $ref: "../schemas/document-enums.yaml#/DocumentStatus"
      nullable: false
    downloadUrl:
      type: string
      format: uri
      nullable: false
    metadata:
      $ref: "#/DocumentMetadataResponse"
      nullable: false
  allOf:
    - $ref: "../../common/schemas/base.yaml#/TimestampProperties"
    - type: object
      properties:
        createdBy:
          type: string
          nullable: false

DocumentSummaryResponse:
  type: object
  title: DocumentSummaryResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    fileName:
      type: string
    fileSize:
      type: integer
      format: int64
    downloadUrl:
      type: string
      format: uri
    createdAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"

DocumentMetadataResponse:
  type: object
  title: DocumentMetadataResponse
  properties:
    template:
      type: string
    version:
      type: string
    generationTime:
      type: number
      format: double
      description: Час генерації в секундах
    pageCount:
      type: integer
      description: Кількість сторінок (для PDF)

# QR Code Responses
QRCodeResponse:
  type: object
  title: QRCodeResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    data:
      type: string
      description: Закодовані дані
    type:
      $ref: "../schemas/document-enums.yaml#/QRCodeType"
    size:
      type: integer
    format:
      $ref: "../schemas/document-enums.yaml#/QRCodeFormat"
    imageUrl:
      type: string
      format: uri
      description: URL для отримання зображення
    createdAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"

QRCodeSummaryResponse:
  type: object
  title: QRCodeSummaryResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    imageUrl:
      type: string
      format: uri
    size:
      type: integer

# Digital Signature Responses
DigitalSignatureResponse:
  type: object
  title: DigitalSignatureResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    documentId:
      $ref: "../../common/schemas/base.yaml#/UUID"
    type:
      $ref: "../schemas/document-enums.yaml#/SignatureType"
    signerName:
      type: string
    signerRole:
      type: string
    signedAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
    ipAddress:
      type: string
    imageUrl:
      type: string
      format: uri
      description: URL для отримання зображення підпису
    metadata:
      $ref: "#/SignatureMetadataResponse"
    isValid:
      type: boolean
      description: Чи валідний підпис

DigitalSignatureSummaryResponse:
  type: object
  title: DigitalSignatureSummaryResponse
  properties:
    id:
      $ref: "../../common/schemas/base.yaml#/UUID"
    type:
      $ref: "../schemas/document-enums.yaml#/SignatureType"
    signerName:
      type: string
    signedAt:
      $ref: "../../common/schemas/base.yaml#/Timestamp"
    imageUrl:
      type: string
      format: uri

SignatureMetadataResponse:
  type: object
  title: SignatureMetadataResponse
  properties:
    deviceInfo:
      type: string
    browserInfo:
      type: string
    screenResolution:
      type: string
    signatureMethod:
      $ref: "../schemas/document-enums.yaml#/SignatureMethod"
    signatureDuration:
      type: number
      format: double
      description: Час створення підпису в секундах

# Page Responses
ReceiptPageResponse:
  type: object
  title: ReceiptPageResponse
  required:
    - content
    - pageable
    - totalElements
    - totalPages
    - last
    - first
    - numberOfElements
  properties:
    content:
      type: array
      nullable: false
      items:
        $ref: "#/ReceiptResponse"
    pageable:
      $ref: "../../common/schemas/pagination.yaml#/PageableInfo"
      nullable: false
    totalElements:
      type: integer
      format: int64
      nullable: false
    totalPages:
      type: integer
      nullable: false
    last:
      type: boolean
      nullable: false
    first:
      type: boolean
      nullable: false
    numberOfElements:
      type: integer
      nullable: false

DocumentPageResponse:
  type: object
  title: DocumentPageResponse
  required:
    - content
    - pageable
    - totalElements
    - totalPages
    - last
    - first
    - numberOfElements
  properties:
    content:
      type: array
      nullable: false
      items:
        $ref: "#/DocumentResponse"
    pageable:
      $ref: "../../common/schemas/pagination.yaml#/PageableInfo"
      nullable: false
    totalElements:
      type: integer
      format: int64
      nullable: false
    totalPages:
      type: integer
      nullable: false
    last:
      type: boolean
      nullable: false
    first:
      type: boolean
      nullable: false
    numberOfElements:
      type: integer
      nullable: false

# PDF Generation Responses
PdfGenerationResponse:
  type: object
  title: PdfGenerationResponse
  description: Відповідь з інформацією про згенерований PDF файл
  properties:
    documentId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      description: Ідентифікатор документа
    filename:
      type: string
      description: Ім'я файлу
      example: "receipt-AKSI-01-2024-000001.pdf"
    size:
      type: integer
      description: Розмір файлу в байтах
      example: 245760
    downloadUrl:
      type: string
      format: uri
      description: URL для завантаження PDF
      example: "/api/documents/550e8400-e29b-41d4-a716-446655440000/download"

# QR Code Binary Response
QrCodeBinaryResponse:
  type: object
  title: QrCodeBinaryResponse
  description: Відповідь з інформацією про QR код для завантаження
  properties:
    qrCodeId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      description: Ідентифікатор QR коду
    format:
      $ref: "../schemas/document-enums.yaml#/QRCodeFormat"
      description: Формат зображення
    size:
      type: integer
      description: Розмір зображення в пікселях
      example: 256
    downloadUrl:
      type: string
      format: uri
      description: URL для завантаження зображення
      example: "/api/qr-codes/550e8400-e29b-41d4-a716-446655440000?format=PNG&size=256"

# Digital Signature Image Response
SignatureImageResponse:
  type: object
  title: SignatureImageResponse
  description: Відповідь з інформацією про зображення цифрового підпису
  properties:
    url:
      type: string
      format: uri
      description: URL для завантаження зображення підпису
      example: "http://localhost:8080/api/digital-signatures/550e8400-e29b-41d4-a716-446655440000/image?format=PNG"
    format:
      $ref: "./document-enums.yaml#/ImageFormat"
      description: Формат зображення
    filename:
      type: string
      description: Ім'я файлу для завантаження
      example: "signature-550e8400-e29b-41d4-a716-446655440000.png"
    size:
      type: integer
      description: Розмір файлу в байтах
      example: 5120
    dimensions:
      type: object
      title: ImageDimensions
      properties:
        width:
          type: integer
          description: Ширина зображення в пікселях
          example: 200
        height:
          type: integer
          description: Висота зображення в пікселях
          example: 100

# Signature Validation Response
SignatureValidationResponse:
  type: object
  title: SignatureValidationResponse
  description: Результат валідації цифрового підпису
  properties:
    isValid:
      type: boolean
      description: Чи валідний підпис
      example: true
    validationDetails:
      type: object
      title: ValidationDetails
      description: Детальна інформація про валідацію
      properties:
        signatureIntact:
          type: boolean
          description: Чи цілісний підпис
          example: true
        documentMatches:
          type: boolean
          description: Чи відповідає документу
          example: true
        notExpired:
          type: boolean
          description: Чи не прострочений
          example: true
        signerVerified:
          type: boolean
          description: Чи підтверджений підписант
          example: true

# Document Download Response
DocumentDownloadResponse:
  type: object
  title: DocumentDownloadResponse
  description: Відповідь з інформацією для завантаження документа
  properties:
    documentId:
      $ref: "../../common/schemas/base.yaml#/UUID"
      description: Ідентифікатор документа
    filename:
      type: string
      description: Ім'я файлу
      example: "document.pdf"
    contentType:
      type: string
      description: MIME тип файлу
      example: "application/pdf"
    size:
      type: integer
      description: Розмір файлу в байтах
      example: 1048576
    downloadUrl:
      type: string
      format: uri
      description: URL для завантаження файлу
      example: "/api/documents/550e8400-e29b-41d4-a716-446655440000/download"

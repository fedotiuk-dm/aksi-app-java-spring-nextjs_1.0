# Endpoints для генерації PDF
/api/receipts/{id}/pdf:
  get:
    tags:
      - pdf-generation
    summary: Отримати PDF квитанції
    description: Повертає PDF версію квитанції
    parameters:
      - $ref: "../../common/parameters/path.yaml#/IdParam"
      - name: template
        in: query
        description: Шаблон квитанції
        required: false
        schema:
          $ref: "../schemas/document-enums.yaml#/ReceiptTemplate"
          default: STANDARD
    responses:
      200:
        description: PDF файл квитанції
        content:
          application/pdf:
            schema:
              type: string
              format: binary
          application/json:
            schema:
              type: object
              properties:
                documentId:
                  $ref: "../../common/schemas/base.yaml#/UUID"
                filename:
                  type: string
                  description: Ім'я файлу
                size:
                  type: integer
                  description: Розмір файлу в байтах
                downloadUrl:
                  type: string
                  format: uri
                  description: URL для завантаження PDF
        headers:
          Content-Disposition:
            description: Attachment filename
            schema:
              type: string
              example: attachment; filename="receipt-AKSI-01-2024-000001.pdf"
      404:
        description: Квитанція не знайдена
        content:
          application/json:
            schema:
              $ref: "../../common/schemas/errors.yaml#/ErrorResponse"
    operationId: getReceiptPdf

  post:
    tags:
      - pdf-generation
    summary: Згенерувати PDF квитанції
    description: Генерує PDF версію квитанції (якщо ще не згенерована)
    parameters:
      - $ref: "../../common/parameters/path.yaml#/IdParam"
    requestBody:
      required: false
      content:
        application/json:
          schema:
            $ref: "../schemas/document-requests.yaml#/GeneratePdfRequest"
    responses:
      201:
        description: PDF успішно згенеровано
        content:
          application/json:
            schema:
              $ref: "../schemas/document-responses.yaml#/DocumentResponse"
      200:
        description: PDF вже існує
        content:
          application/json:
            schema:
              $ref: "../schemas/document-responses.yaml#/DocumentResponse"
      404:
        description: Квитанція не знайдена
        content:
          application/json:
            schema:
              $ref: "../../common/schemas/errors.yaml#/ErrorResponse"
    operationId: generateReceiptPdf

databaseChangeLog:
  - changeSet:
      id: 011-1
      author: aksi
      comment: Create items from price_list_items
      preConditions:
        - onFail: HALT
          and:
          - columnExists:
              tableName: items
              columnName: catalog_number
          - columnExists:
              tableName: items
              columnName: unit_of_measure
      changes:
        - sql:
            sql: |
              INSERT INTO items (id, code, name, category, catalog_number, unit_of_measure, active, sort_order)
              SELECT 
                gen_random_uuid(),
                CONCAT(category_code, '_', catalog_number),
                name,
                category_code,
                catalog_number,
                unit_of_measure,
                active,
                catalog_number
              FROM price_list_items;
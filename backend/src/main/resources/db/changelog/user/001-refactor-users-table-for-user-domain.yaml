databaseChangeLog:
  # Додавання полів role, branch_id та is_active до таблиці users
  - changeSet:
      id: user-001-add-role-and-branch-to-users
      author: system
      changes:
        - addColumn:
            tableName: users
            columns:
              - column:
                  name: role
                  type: VARCHAR(20)
                  constraints:
                    nullable: false
                  defaultValue: 'OPERATOR'
              - column:
                  name: branch_id
                  type: UUID
              - column:
                  name: is_active
                  type: BOOLEAN
                  constraints:
                    nullable: false
                  defaultValue: 'true'
  
  # Додавання індексу для branch_id
  - changeSet:
      id: user-002-add-branch-id-index
      author: system
      changes:
        - createIndex:
            indexName: idx_user_branch_id
            tableName: users
            columns:
              - column:
                  name: branch_id
  
  # Додавання індексу для role
  - changeSet:
      id: user-003-add-role-index
      author: system
      changes:
        - createIndex:
            indexName: idx_user_role
            tableName: users
            columns:
              - column:
                  name: role
  
  # Оновлення check constraint для нових ролей
  - changeSet:
      id: user-004-update-role-constraint
      author: system
      changes:
        - sql:
            sql: >
              ALTER TABLE users ADD CONSTRAINT chk_user_role_domain
              CHECK (role IN ('ADMIN', 'OPERATOR'));
  
  # Додавання коментарів до нових полів
  - changeSet:
      id: user-005-add-column-comments
      author: system
      changes:
        - setColumnRemarks:
            tableName: users
            columnName: role
            remarks: "Роль користувача в системі (ADMIN або OPERATOR)"
        - setColumnRemarks:
            tableName: users
            columnName: branch_id
            remarks: "ID філії до якої прив'язаний користувач"
        - setColumnRemarks:
            tableName: users
            columnName: is_active
            remarks: "Чи активний користувач в системі"
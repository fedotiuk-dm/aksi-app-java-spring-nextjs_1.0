databaseChangeLog:
  - changeSet:
      id: 'clients-1.0-006'
      author: 'fedotiuk-dm'
      comment: 'Create client communication channels table'
      preConditions:
        onFail: MARK_RAN
        and:
          - tableExists:
              tableName: clients
          - not:
              tableExists:
                tableName: client_communication_channels
      changes:
        - createTable:
            tableName: client_communication_channels
            columns:
              - column:
                  name: client_id
                  type: UUID
                  constraints:
                    nullable: false
                    foreignKeyName: fk_client_communication_client
                    references: clients(id)
              - column:
                  name: channel
                  type: VARCHAR(50)
                  constraints:
                    nullable: false
        - addPrimaryKey:
            tableName: client_communication_channels
            columnNames: client_id, channel
            constraintName: pk_client_communication_channels

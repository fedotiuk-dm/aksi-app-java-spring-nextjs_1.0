# Auth Domain Improvement Plan

## üéØ –ú–µ—Ç–∞

–ü–æ–∫—Ä–∞—â–∏—Ç–∏ Auth –¥–æ–º–µ–Ω –∑–≥—ñ–¥–Ω–æ –∑ —á–µ–∫–ª—ñ—Å—Ç-–ø–ª–∞–Ω–æ–º, –∑–∞–±–µ–∑–ø–µ—á–∏–≤—à–∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å, –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —Ç–∞ –∫–æ–¥-—Å—Ç–∏–ª—å.

---

## üö® **–ö–†–ò–¢–ò–ß–ù–ê –ü–†–û–ë–õ–ï–ú–ê: NULL –í–ê–õ–Ü–î–ê–¶–Ü–Ø –í OPENAPI**

### üìä **–ê–Ω–∞–ª—ñ–∑ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω—É**

**–ü–†–û–ë–õ–ï–ú–ê:** –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó TypeScript —Ç–∏–ø—ñ–≤ –∑ OpenAPI –º–∞–π–∂–µ –≤—Å—ñ –ø–æ–ª—è —Å—Ç–∞—é—Ç—å optional (`–ø–æ–ª–µ?`), —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –Ω–µ–∫–µ—Ä–æ–≤–∞–Ω–∏—Ö null/undefined –∑–Ω–∞—á–µ–Ω—å —É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ.

**–ö–û–†–Ü–ù–¨ –ü–†–û–ë–õ–ï–ú–ò:**

1. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å nullable: false** —É –±—ñ–ª—å—à–æ—Å—Ç—ñ —Å—Ö–µ–º
2. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å required –ø–æ–ª—ñ–≤** —É –±–∞–≥–∞—Ç—å–æ—Ö response —Å—Ö–µ–º–∞—Ö
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è** –¥–ª—è –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤
4. **Inconsistent validation** –º—ñ–∂ –¥–æ–º–µ–Ω–∞–º–∏

**–ö–û–ù–ö–†–ï–¢–ù–Ü –ü–†–ò–ö–õ–ê–î–ò:**

```typescript
// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω):
export interface UserResponse {
  id?: string; // Optional, —Ö–æ—á–∞ —Ü–µ primary key!
  username?: string; // Optional, —Ö–æ—á–∞ required
  email?: string; // Optional, —Ö–æ—á–∞ required
}

// –ü–†–ê–í–ò–õ–¨–ù–û (–ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è):
export interface UserResponse {
  id: string; // Required, non-nullable
  username: string; // Required, non-nullable
  email: string; // Required, non-nullable
}
```

**–ú–ê–°–®–¢–ê–ë –ü–†–û–ë–õ–ï–ú–ò:**

- ‚úÖ Auth –¥–æ–º–µ–Ω: —á–∞—Å—Ç–∫–æ–≤–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π (–º–∞—î required + nullable: false)
- ‚ùå Client –¥–æ–º–µ–Ω: –º–∞—î required, –∞–ª–µ –ù–ï –º–∞—î nullable: false
- ‚ùå Branch –¥–æ–º–µ–Ω: –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π nullable: false, –∞–ª–µ –Ω–µ –≤—Å—ñ —Å—Ö–µ–º–∏
- ‚ùå Item –¥–æ–º–µ–Ω: –ø–æ—Ç—Ä–µ–±—É—î –∞—É–¥–∏—Ç—É
- ‚ùå Order –¥–æ–º–µ–Ω: –ø–æ—Ç—Ä–µ–±—É—î –∞—É–¥–∏—Ç—É
- ‚ùå Document –¥–æ–º–µ–Ω: –ø–æ—Ç—Ä–µ–±—É—î –∞—É–¥–∏—Ç—É
- ‚ùå Pagination —Å—Ö–µ–º–∏: –º–∞—î required, –∞–ª–µ –ù–ï –º–∞—î nullable: false
- ‚ùå Search —Å—Ö–µ–º–∏: —á–∞—Å—Ç–æ –ù–ï –º–∞—î required –≤–∑–∞–≥–∞–ª—ñ

---

## üìã TODO –ü–ª–∞–Ω (–û–ù–û–í–õ–ï–ù–ò–ô –ó –ö–†–ò–¢–ò–ß–ù–ò–ú –ü–†–Ü–û–†–ò–¢–ï–¢–û–ú)

### üî• **–ï–¢–ê–ü 0: –ö–†–ò–¢–ò–ß–ù–ê NULL –í–ê–õ–Ü–î–ê–¶–Ü–Ø (–ù–ê–ô–í–ò–©–ò–ô –ü–†–Ü–û–†–ò–¢–ï–¢)**

#### 0.1 –°–∏—Å—Ç–µ–º–Ω–∏–π –∞—É–¥–∏—Ç OpenAPI —Å—Ö–µ–º

- [x] **–ü—Ä–æ–≤–µ–¥–µ–Ω–æ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –∞–Ω–∞–ª—ñ–∑ –ø—Ä–æ–±–ª–µ–º–∏**

  - ‚úÖ –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ —â–æ auth-responses.yaml –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π (–º–∞—î required + nullable: false)
  - ‚úÖ –í–∏—è–≤–ª–µ–Ω–æ —â–æ client/branch/—ñ–Ω—à—ñ –¥–æ–º–µ–Ω–∏ –ù–ï –º–∞—é—Ç—å nullable: false
  - ‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ —â–æ pagination/search —Å—Ö–µ–º–∏ —á–∞—Å—Ç–æ –ù–ï –º–∞—é—Ç—å required –ø–æ–ª—ñ–≤
  - ‚úÖ –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ —â–æ Orval –≥–µ–Ω–µ—Ä—É—î optional –ø–æ–ª—è —á–µ—Ä–µ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å proper validation

- [ ] **–î–µ—Ç–∞–ª—å–Ω–∏–π –∞—É–¥–∏—Ç –≤—Å—ñ—Ö –¥–æ–º–µ–Ω—ñ–≤**
  - [ ] Item –¥–æ–º–µ–Ω schemas –∞—É–¥–∏—Ç
  - [ ] Order –¥–æ–º–µ–Ω schemas –∞—É–¥–∏—Ç
  - [ ] Document –¥–æ–º–µ–Ω schemas –∞—É–¥–∏—Ç
  - [ ] Common schemas –∞—É–¥–∏—Ç (pagination, errors, base)

#### 0.2 –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –±–∞–∑–æ–≤–∏—Ö —Å—Ö–µ–º

- [ ] **Common schemas (base.yaml)**

  - [ ] –î–æ–¥–∞—Ç–∏ nullable: false –¥–æ UUID, Timestamp, Date, Email, PhoneNumber
  - [ ] –î–æ–¥–∞—Ç–∏ nullable: false –¥–æ Money, Percentage, PositiveInteger
  - [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ –±–∞–∑–æ–≤—ñ —Ç–∏–ø–∏

- [ ] **Common schemas (pagination.yaml)**

  - [ ] –î–æ–¥–∞—Ç–∏ nullable: false –¥–æ –≤—Å—ñ—Ö –ø–æ–ª—ñ–≤ PageableInfo
  - [ ] –î–æ–¥–∞—Ç–∏ nullable: false –¥–æ SortInfo –ø–æ–ª—ñ–≤

- [ ] **Common schemas (errors.yaml)**
  - [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ ErrorResponse —Ç–∞ ValidationErrorResponse
  - [ ] –î–æ–¥–∞—Ç–∏ nullable: false –¥–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ

#### 0.3 –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è Response —Å—Ö–µ–º

- [ ] **Client Response —Å—Ö–µ–º–∏**

  - [ ] ClientResponse: –¥–æ–¥–∞—Ç–∏ nullable: false –¥–æ required –ø–æ–ª—ñ–≤
  - [ ] ClientPageResponse: –¥–æ–¥–∞—Ç–∏ required –ø–æ–ª—è + nullable: false
  - [ ] ClientSearchResponse: –¥–æ–¥–∞—Ç–∏ required –ø–æ–ª—è + nullable: false
  - [ ] ClientContactsResponse: –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ validation

- [ ] **Branch Response —Å—Ö–µ–º–∏**

  - [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ BranchResponse completeness
  - [ ] –í–∏–ø—Ä–∞–≤–∏—Ç–∏ pagination responses

- [ ] **Item Response —Å—Ö–µ–º–∏**

  - [ ] –ü–æ–≤–Ω–∏–π –∞—É–¥–∏—Ç —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
  - [ ] PriceListItemResponse validation

- [ ] **Order Response —Å—Ö–µ–º–∏**

  - [ ] –ü–æ–≤–Ω–∏–π –∞—É–¥–∏—Ç —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
  - [ ] OrderCalculationResponse validation

- [ ] **Document Response —Å—Ö–µ–º–∏**
  - [ ] –ü–æ–≤–Ω–∏–π –∞—É–¥–∏—Ç —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
  - [ ] ReceiptResponse validation

#### 0.4 –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è Request —Å—Ö–µ–º

- [ ] **Update Request —Å—Ö–µ–º–∏**

  - [ ] –í—Å—ñ UpdateXxxRequest –º–∞—é—Ç—å –ù–ï –º–∞—Ç–∏ required (–æ—Å–∫—ñ–ª—å–∫–∏ —Ü–µ partial update)
  - [ ] –ê–ª–µ –º–∞—é—Ç—å –º–∞—Ç–∏ nullable: false –¥–ª—è –ø–æ–ª—ñ–≤ —â–æ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è

- [ ] **Create Request —Å—Ö–µ–º–∏**

  - [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ required –ø–æ–ª—è –≤ Create requests
  - [ ] –î–æ–¥–∞—Ç–∏ nullable: false –¥–ª—è –æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤

- [ ] **Search Request —Å—Ö–µ–º–∏**
  - [ ] –î–æ–¥–∞—Ç–∏ —Ö–æ—á–∞ –± –æ–¥–∏–Ω required –ø–∞—Ä–∞–º–µ—Ç—Ä –∞–±–æ logic validation
  - [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ pagination parameters

#### 0.5 –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è

- [ ] **–†–µ–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è API**

  - [ ] –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ frontend API –ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å
  - [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ TypeScript —Ç–∏–ø–∏ —Å—Ç–∞–ª–∏ non-optional

- [ ] **Backend —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è**

  - [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ Entity validation –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î OpenAPI
  - [ ] –û–Ω–æ–≤–∏—Ç–∏ Bean Validation annotations —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ

- [ ] **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**
  - [ ] –ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ null value rejection
  - [ ] API integration tests –¥–ª—è validation

---

### üîß **–ï–¢–ê–ü 1: –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ñ –∑–º—ñ–Ω–∏ —Ç–∞ ID –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ü—ñ—è**

_–ü—Ä–æ—Å—Ç—ñ –∑–º—ñ–Ω–∏ –±–µ–∑ —Å–∫–ª–∞–¥–Ω–æ—ó –ª–æ–≥—ñ–∫–∏_

#### 1.1 –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ü—ñ—è Entity ID

- [ ] **–ê—É–¥–∏—Ç –ø–æ—Ç–æ—á–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ ID**

  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ UserEntity —Ç–∞ RefreshTokenEntity –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –¥–≤–æ—Ö ID (id + uuid)
  - –î–æ–∫—É–º–µ–Ω—Ç—É–≤–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –ø–æ–ª—ñ–≤ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä—ñ–≤

- [ ] **–û–Ω–æ–≤–∏—Ç–∏ BaseEntity**

  - –ó–º—ñ–Ω–∏—Ç–∏ BaseEntity –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è UUID —è–∫ primary key
  - –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è —â–æ –ø–æ–ª–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è `id` (–Ω–µ `uuid`)
  - –û–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ Entity —â–æ –Ω–∞—Å–ª—ñ–¥—É—é—Ç—å BaseEntity

- [ ] **–ü—Ä–∏–±—Ä–∞—Ç–∏ –¥—É–±–ª—é–≤–∞–Ω–Ω—è ID**
  - –í–∏–¥–∞–ª–∏—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–ª—è id/uuid –≤ Auth entities
  - –ó–∞–ª–∏—à–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ –æ–¥–Ω–µ –ø–æ–ª–µ `id` —Ç–∏–ø—É UUID
  - –û–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ –º–∞–ø–ø—ñ–Ω–≥–∏ —Ç–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

#### 1.2 UUID Generator

- [ ] **–ê—É–¥–∏—Ç UUID –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó**
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∫–∞—Å—Ç–æ–º–Ω–∏–π UUID –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
  - –í–∏–¥–∞–ª–∏—Ç–∏ –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω—ñ UUID –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∏ —è–∫—â–æ —î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π
  - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π JPA –ø—ñ–¥—Ö—ñ–¥ –∑ @GeneratedValue

---

### üîç **–ï–¢–ê–ü 2: –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∞ –∫–æ–Ω—Å—Ç—Ä–µ–π–Ω—Ç–∏**

_–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –Ω–∞ –≤—Å—ñ—Ö —Ä—ñ–≤–Ω—è—Ö_

#### 2.1 Database Constraints

- [x] **–£–Ω—ñ–∫–∞–ª—å–Ω—ñ –∫–æ–Ω—Å—Ç—Ä–µ–π–Ω—Ç–∏ –≤ –ë–î**
  - ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ users —Ç–∞–±–ª–∏—Ü—é –Ω–∞ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å email
  - ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ users —Ç–∞–±–ª–∏—Ü—é –Ω–∞ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å username
  - ‚úÖ –í—Å—ñ UNIQUE constraints –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –≤ Liquibase –º—ñ–≥—Ä–∞—Ü—ñ—ó
  - ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ refresh_tokens —Ç–∞–±–ª–∏—Ü—é –Ω–∞ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ—Å—Ç—å token

#### 2.2 Cleanup –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤ (–ü–†–Ü–û–†–ò–¢–ï–¢)

- [ ] **–ê—É–¥–∏—Ç MapStruct –º–∞–ø–ø–µ—Ä—ñ–≤**

  - [x] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ AuthMapper –Ω–∞ –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω—ñ –º–µ—Ç–æ–¥–∏ (–ø—ñ–¥—Å–≤—ñ—á–µ–Ω—ñ IDE)
  - [x] –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–æ –º–µ—Ç–æ–¥–∏ —â–æ –∑–∞–ª–∏—à–∏–ª–∏—Å—å –ø—ñ—Å–ª—è –≤–∏–Ω–µ—Å–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ –≤ Specifications
  - [x] –î–æ–∫—É–º–µ–Ω—Ç–æ–≤–∞–Ω–æ —è–∫—ñ –º–µ—Ç–æ–¥–∏ —Ä–µ–∞–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è

- [ ] **–ü—Ä–∏–±—Ä–∞—Ç–∏ unused code –∑ AuthMapper**
  - [ ] –í–∏–¥–∞–ª–∏—Ç–∏ createUserFromLoginRequest() - –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
  - [ ] –í–∏–¥–∞–ª–∏—Ç–∏ offsetDateTimeToLocalDateTime() - –¥—É–±–ª—é—î—Ç—å—Å—è –∑ BaseMapperConfig
  - [ ] –í–∏–¥–∞–ª–∏—Ç–∏ fromApiUserRole() - –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è
  - [ ] –í–∏–¥–∞–ª–∏—Ç–∏ apiRolesToDomainRoles() - –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è

#### 2.3 OpenAPI Schema Validation (**–ü–ï–†–ï–ù–ï–°–ï–ù–û –í –ï–¢–ê–ü 0**)

- [x] **–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ –ï–¢–ê–ü 0 —è–∫ –∫—Ä–∏—Ç–∏—á–Ω–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç**

---

### üõ†Ô∏è **–ï–¢–ê–ü 3: –õ–æ–≥—ñ–∫–∞ —Ç–∞ —É—Ç–∏–ª—ñ—Ç–∏**

_–í–∏–Ω–µ—Å–µ–Ω–Ω—è –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏ –∑ Entity_

#### 3.1 Entity Cleanup

- [ ] **–ê—É–¥–∏—Ç –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏ –≤ Entity**

  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ UserEntity –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Å–∫–ª–∞–¥–Ω–∏—Ö business –º–µ—Ç–æ–¥—ñ–≤
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ RefreshTokenEntity –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å validation –ª–æ–≥—ñ–∫–∏
  - –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–Ω–µ—Å—Ç–∏ –≤ —É—Ç–∏–ª—ñ—Ç–∏

- [ ] **–°—Ç–≤–æ—Ä–∏—Ç–∏ Auth —É—Ç–∏–ª—ñ—Ç–∏**
  - –í–∏–Ω–µ—Å—Ç–∏ password validation –≤ AuthValidationUtils
  - –í–∏–Ω–µ—Å—Ç–∏ token generation –ª–æ–≥—ñ–∫—É –≤ TokenUtils
  - –í–∏–Ω–µ—Å—Ç–∏ account locking –ª–æ–≥—ñ–∫—É –≤ AccountLockingUtils
  - –û–Ω–æ–≤–∏—Ç–∏ Entity —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —É—Ç–∏–ª—ñ—Ç–∏

#### 3.2 –ß–∏—Å–ª–æ–≤—ñ –ø–æ–ª—è —Ç–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è

- [ ] **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏—Å–ª–æ–≤—ñ –ø–æ–ª—è**
  - –ó–Ω–∞–π—Ç–∏ –≤—Å—ñ —á–∏—Å–ª–æ–≤—ñ –ø–æ–ª—è –≤ Auth –¥–æ–º–µ–Ω—ñ (—è–∫—â–æ —î)
  - –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è %.2f –¥–ª—è –≥—Ä–æ—à–æ–≤–∏—Ö —Å—É–º
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ timestamp —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è

---

### üîÑ **–ï–¢–ê–ü 4: –†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó —Ç–∞ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó**

_–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ –º–µ—Ç–æ–¥—ñ–≤_

#### 4.1 Repository Specifications

- [ ] **–ê—É–¥–∏—Ç –ø–æ—Ç–æ—á–Ω–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤**

  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ UserRepository –Ω–∞ –≤–µ–ª–∏–∫—ñ –º–µ—Ç–æ–¥–∏ –∑ –±–∞–≥–∞—Ç—å–º–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ RefreshTokenRepository –Ω–∞ —Å–∫–ª–∞–¥–Ω—ñ –∑–∞–ø–∏—Ç–∏
  - –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ —è–∫—ñ –º–µ—Ç–æ–¥–∏ —Ä–µ–∞–ª—å–Ω–æ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å Specification
  - –ó–Ω–∞–π—Ç–∏ –Ω–∞–¥–º—ñ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Specifications (–±–∞–≥–∞—Ç–æ –º–µ—Ç–æ–¥—ñ–≤ –Ω–µ –ø—Ä–∞—Ü—é—î)

- [ ] **–û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –≤–µ–ª–∏–∫—ñ –º–µ—Ç–æ–¥–∏**
  - –†–æ–∑–±–∏—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ @Query –º–µ—Ç–æ–¥–∏ –Ω–∞ Specifications (—Ç—ñ–ª—å–∫–∏ –¥–µ –±–∞–≥–∞—Ç–æ –¥–∏–Ω–∞–º—ñ—á–Ω–∏—Ö —Ñ—ñ–ª—å—Ç—Ä—ñ–≤)
  - –ó–∞–ª–∏—à–∏—Ç–∏ –ø—Ä–æ—Å—Ç—ñ –º–µ—Ç–æ–¥–∏ –±–µ–∑ –∑–º—ñ–Ω (–º–∞–ª—ñ –º–µ—Ç–æ–¥–∏ –Ω–µ —á—ñ–ø–∞—Ç–∏)
  - –ü—Ä–∏–±—Ä–∞—Ç–∏ –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω—ñ Specification –º–µ—Ç–æ–¥–∏ (–ø—ñ–¥—Å–≤—ñ—á–µ–Ω—ñ IDE)
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –≤—Å—ñ –¥–∏–Ω–∞–º—ñ—á–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∏ –ø—Ä–∞—Ü—é—é—Ç—å –ø—ñ—Å–ª—è cleanup

#### 4.2 –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ü—ñ—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

- [ ] **–£–∑–≥–æ–¥–∏—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é**
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ Entity validation —Å–ø—ñ–≤–ø–∞–¥–∞—î –∑ OpenAPI
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ Service validation —Å–ø—ñ–≤–ø–∞–¥–∞—î –∑ OpenAPI
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ Repository constraints —Å–ø—ñ–≤–ø–∞–¥–∞—é—Ç—å –∑ OpenAPI
  - –£—Å—É–Ω—É—Ç–∏ –¥—É–±–ª—é–≤–∞–Ω–Ω—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

---

### ‚ö†Ô∏è **–ï–¢–ê–ü 5: Exception Handling —Ç–∞ Warnings**

_–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫_

#### 5.1 Return Warnings

- [ ] **–ê—É–¥–∏—Ç warning scenarios**

  - –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –¥–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ warning –∑–∞–º—ñ—Å—Ç—å exception
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ account locking scenarios
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ token expiration scenarios

- [ ] **–Ü–º–ø–ª–µ–º–µ–Ω—Ç—É–≤–∞—Ç–∏ warnings**
  - –û–Ω–æ–≤–∏—Ç–∏ Service –º–µ—Ç–æ–¥–∏ –¥–ª—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è warnings
  - –û–Ω–æ–≤–∏—Ç–∏ Response DTO –¥–ª—è –≤–∫–ª—é—á–µ–Ω–Ω—è warnings
  - –û–Ω–æ–≤–∏—Ç–∏ OpenAPI —Å—Ö–µ–º–∏ –¥–ª—è warning –ø–æ–ª—ñ–≤

#### 5.2 Exception Handler

- [ ] **–ü–µ—Ä–µ–ø–∏—Å–∞—Ç–∏ Exception Handler**
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π ExceptionHandler –Ω–∞ –ø–æ–∫—Ä–∏—Ç—Ç—è Auth exceptions
  - –î–æ–¥–∞—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—É –æ–±—Ä–æ–±–∫—É –¥–ª—è Auth-specific exceptions
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –≤—Å—ñ Auth exceptions –º–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ñ HTTP —Å—Ç–∞—Ç—É—Å–∏
  - –î–æ–¥–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è security events

---

### üß™ **–ï–¢–ê–ü 6: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —Ñ—ñ–Ω–∞–ª—å–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è**

_Groovy Spock —Ç–µ—Å—Ç–∏ + OpenAPI validation_

#### 6.1 Unit Tests

- [ ] **Service Layer Tests**
  - –ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è AuthService
  - –ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è JwtTokenService
  - –ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è UserValidator
  - –ü–æ–∫—Ä–∏—Ç–∏ –≤—Å—ñ business scenarios

#### 6.2 Integration Tests

- [ ] **Repository Tests**
  - –ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è UserRepository
  - –ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è RefreshTokenRepository
  - –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤—Å—ñ custom queries —Ç–∞ specifications

#### 6.3 Controller Tests

- [ ] **API Layer Tests**
  - –ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è AuthenticationApiController
  - –ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è AuthorizationApiController
  - –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤—Å—ñ endpoints –∑ —Ä—ñ–∑–Ω–∏–º–∏ scenarios

#### 6.4 OpenAPI Schema Validation (–§–Ü–ù–ê–õ–¨–ù–ò–ô –ï–¢–ê–ü)

- [ ] **–°–∏—Å—Ç–µ–º–Ω–µ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è nullable –ø–æ–ª—ñ–≤**
  - –î–µ—Ç–∞–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –≤—Å—ñ—Ö nullable –ø–æ–ª—ñ–≤ –≤ Auth –¥–æ–º–µ–Ω—ñ
  - –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Å—Ö–µ–º (email format, pattern, minLength/maxLength)
  - –£—Å—É–Ω–µ–Ω–Ω—è nullable –¥–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ (–∫–æ–º–ø–ª–µ–∫—Å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥)
  - –î–æ–¥–∞—Ç–∏ pattern –¥–ª—è password (–º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –≤–∏–º–æ–≥–∏ –±–µ–∑–ø–µ–∫–∏)
  - –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è OpenAPI —Å—Ö–µ–º –∑ —Ñ–∞–∫—Ç–∏—á–Ω–∏–º–∏ –ø–æ—Ç—Ä–µ–±–∞–º–∏

#### 6.5 Edge Cases

- [ ] **Security Tests**
  - –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ account locking mechanism
  - –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ token expiration scenarios
  - –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ invalid credentials scenarios
  - –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ concurrent access scenarios

---

## üìä –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–û–ù–û–í–õ–ï–ù–û)

### üî• **–ö–†–ò–¢–ò–ß–ù–ò–ô –ü–†–Ü–û–†–ò–¢–ï–¢ (–ó–ê–†–ê–ó)**

- OpenAPI Schema Validation (–ï–¢–ê–ü 0)
- NULL values handling –≤ TypeScript
- Frontend API regeneration

### üü¢ **–í–∏—Å–æ–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç (–ü–Ü–°–õ–Ø –ï–¢–ê–ü 0)**

- Cleanup –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤ –≤ AuthMapper
- Entity ID –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ü—ñ—è
- Database constraints

### üü° **–°–µ—Ä–µ–¥–Ω—ñ–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç**

- –í–∏–Ω–µ—Å–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ –∑ Entity
- Repository specifications
- Exception handling

### üî¥ **–ù–∏–∑—å–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç (–ö–Ü–ù–ï–¶–¨)**

- Return warnings
- Groovy Spock —Ç–µ—Å—Ç–∏

---

## üéØ –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

### ‚úÖ **–ü—ñ—Å–ª—è –ï–¢–ê–ü 0 (NULL Validation):**

- TypeScript —Ç–∏–ø–∏ –±–µ–∑ optional –ø–æ–ª—ñ–≤ –¥–ª—è required –¥–∞–Ω–∏—Ö
- Proper null validation –Ω–∞ –≤—Å—ñ—Ö —Ä—ñ–≤–Ω—è—Ö
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ OpenAPI —Å—Ö–µ–º–∏
- –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å null pointer exceptions —É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è API requests/responses

### ‚úÖ **–ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤—Å—å–æ–≥–æ –ø–ª–∞–Ω—É:**

- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Entity –∑ UUID
- –ü–æ–≤–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ –≤—Å—ñ—Ö —Ä—ñ–≤–Ω—è—Ö
- –ß–∏—Å—Ç–∏–π –∫–æ–¥ –±–µ–∑ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏ –≤ Entity
- –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó
- –ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏ 80%+
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ warnings

### üìà **–ú–µ—Ç—Ä–∏–∫–∏ —è–∫–æ—Å—Ç—ñ:**

- **Frontend TypeScript:** 0 optional fields –¥–ª—è required data
- **API Validation:** 100% proper null rejection
- Checkstyle: 0 violations
- SonarQube: A rating
- Test coverage: 80%+
- Database constraints: 100% covered
- OpenAPI validation: 100% covered

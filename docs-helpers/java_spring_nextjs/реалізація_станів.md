# üìã **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ Order Wizard "State Module per Step"**

## üèóÔ∏è **–ó–∞–≥–∞–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞**

### **–ü—Ä–∏–Ω—Ü–∏–ø–∏ –ø–æ–±—É–¥–æ–≤–∏**

- **–ú–æ–¥—É–ª—å–Ω—ñ—Å—Ç—å –ø–æ –∫—Ä–æ–∫–∞—Ö**: –∫–æ–∂–µ–Ω –∫—Ä–æ–∫ –≤—ñ–∑–∞—Ä–¥–∞ - –æ–∫—Ä–µ–º–∏–π —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–Ω—ñ–π –º–æ–¥—É–ª—å
- **–†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ**: Zustand (–¥–∞–Ω—ñ) + XState (flow) + Zod (–≤–∞–ª—ñ–¥–∞—Ü—ñ—è) + TanStack Query (API)
- **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ –¥–æ–º–µ–Ω–∞–º–∏**: –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≥–æ—Ç–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ client, order, pricing
- **"DDD inside, FSD outside"**: –≤—Å—è –ª–æ–≥—ñ–∫–∞ –≤ domain, UI –æ—Ç—Ä–∏–º—É—î –≥–æ—Ç–æ–≤—ñ —Ö—É–∫–∏

### **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ä—Ö–Ω—å–æ–≥–æ —Ä—ñ–≤–Ω—è**

```
domain/wizard/                    # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ wizard
‚îú‚îÄ‚îÄ shared/                       # –°–ø—ñ–ª—å–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
‚îú‚îÄ‚îÄ flow/                         # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –º—ñ–∂ –∫—Ä–æ–∫–∞–º–∏
‚îú‚îÄ‚îÄ steps/                        # –ú–æ–¥—É–ª—ñ –æ–∫—Ä–µ–º–∏—Ö –∫—Ä–æ–∫—ñ–≤
‚îî‚îÄ‚îÄ index.ts                      # –ì–æ–ª–æ–≤–Ω–∏–π –µ–∫—Å–ø–æ—Ä—Ç useWizard()

features/order-wizard/            # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ (—ñ—Å–Ω—É—é—á—ñ)
‚îú‚îÄ‚îÄ client-selection/ui/
‚îú‚îÄ‚îÄ branch-selection/             # ‚ùó –û–±–æ–≤'—è–∑–∫–æ–≤–∏–π –∫—Ä–æ–∫ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ itemCatalog-manager/ui/
‚îú‚îÄ‚îÄ itemCatalog-wizard/ui/               # –¶–∏–∫–ª—ñ—á–Ω–∞ –ª–æ–≥—ñ–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ—Å–ª—É–≥
‚îú‚îÄ‚îÄ order-parameters/ui/
‚îú‚îÄ‚îÄ order-confirmation/ui/
‚îî‚îÄ‚îÄ OrderWizard.tsx              # –ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
```

### **üéØ –û—Å–Ω–æ–≤–Ω—ñ —Å—Ç–∞–Ω–∏ —Ç–∞ –ø—ñ–¥—Å—Ç–∞–Ω–∏**

**–û—Å–Ω–æ–≤–Ω—ñ —Å—Ç–∞–Ω–∏ (5 –∫—Ä–æ–∫—ñ–≤):**

- `CLIENT_SELECTION` - –≤–∏–±—ñ—Ä/—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞
- `BRANCH_SELECTION` - –≤–∏–±—ñ—Ä —Ñ—ñ–ª—ñ—ó (–ø–æ—á–∞—Ç–æ–∫ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ –±–µ–∫–µ–Ω–¥—ñ)
- `ITEM_MANAGER` - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- `ORDER_PARAMETERS` - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (–¥–∞—Ç–∏, –∑–Ω–∏–∂–∫–∏, –æ–ø–ª–∞—Ç–∞)
- `ORDER_CONFIRMATION` - –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è

**–ü—ñ–¥—Å—Ç–∞–Ω–∏ Item Wizard (—Ü–∏–∫–ª—ñ—á–Ω—ñ –≤ —Ä–∞–º–∫–∞—Ö ITEM_MANAGER):**

- `itemCatalog-basic-info` - –∫–∞—Ç–µ–≥–æ—Ä—ñ—è, –Ω–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è, –∫—ñ–ª—å–∫—ñ—Å—Ç—å
- `itemCatalog-properties` - –º–∞—Ç–µ—Ä—ñ–∞–ª, –∫–æ–ª—ñ—Ä, –Ω–∞–ø–æ–≤–Ω—é–≤–∞—á, –∑–Ω–æ—Å
- `defects-stains` - –ø–ª—è–º–∏, –¥–µ—Ñ–µ–∫—Ç–∏, —Ä–∏–∑–∏–∫–∏
- `price-calculator` - –º–æ–¥–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏, —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ü—ñ–Ω–∏
- `photo-documentation` - —Ñ–æ—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø—Ä–µ–¥–º–µ—Ç–∞

---

## üìÇ **–î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—ñ–≤**

### **1. Shared Infrastructure**

```
domain/wizard/shared/
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îú‚îÄ‚îÄ wizard-common.types.ts    # –ó–∞–≥–∞–ª—å–Ω—ñ —Ç–∏–ø–∏ –¥–ª—è –≤—Å—ñ—Ö –∫—Ä–æ–∫—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ wizard-events.types.ts    # XState –ø–æ–¥—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ wizard-state.types.ts     # –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ —Å—Ç–∞–Ω—É
‚îÇ
‚îú‚îÄ‚îÄ constants/
‚îÇ   ‚îú‚îÄ‚îÄ wizard.constants.ts       # –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ (timeout, limits)
‚îÇ   ‚îú‚îÄ‚îÄ steps.constants.ts        # –ù–∞–∑–≤–∏ –∫—Ä–æ–∫—ñ–≤, –ø–æ—Ä—è–¥–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ validation.constants.ts   # –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ wizard.utils.ts           # –ó–∞–≥–∞–ª—å–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ validation.utils.ts       # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ transformation.utils.ts   # –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –º—ñ–∂ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏
‚îÇ
‚îî‚îÄ‚îÄ schemas/
    ‚îú‚îÄ‚îÄ wizard-base.schema.ts     # –ë–∞–∑–æ–≤—ñ Zod —Å—Ö–µ–º–∏
    ‚îî‚îÄ‚îÄ wizard-flow.schema.ts     # –°—Ö–µ–º–∞ –¥–ª—è flow —Å—Ç–∞–Ω—É
```

**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å Shared:**

- –ó–∞–≥–∞–ª—å–Ω—ñ —Ç–∏–ø–∏ —Ç–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –¥–ª—è –≤—Å—ñ—Ö –∫—Ä–æ–∫—ñ–≤
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó wizard
- –£—Ç–∏–ª—ñ—Ç–∞—Ä–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –∑–∞–≥–∞–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- –ë–∞–∑–æ–≤—ñ —Å—Ö–µ–º–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

---

### **2. Flow Management**

```
domain/wizard/flow/
‚îú‚îÄ‚îÄ wizard-flow.machine.ts        # –ì–æ–ª–æ–≤–Ω–∞ XState –º–∞—à–∏–Ω–∞
‚îú‚îÄ‚îÄ wizard-flow.schema.ts         # Zod —Å—Ö–µ–º–∞ –¥–ª—è flow –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ wizard-flow.guards.ts         # XState guards –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤
‚îú‚îÄ‚îÄ wizard-flow.actions.ts        # XState actions
‚îú‚îÄ‚îÄ use-wizard-flow.hook.ts       # –•—É–∫ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è flow
‚îî‚îÄ‚îÄ index.ts                      # –ï–∫—Å–ø–æ—Ä—Ç flow API
```

**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å Flow:**

- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –º—ñ–∂ –∫—Ä–æ–∫–∞–º–∏ (NEXT, PREV, GOTO)
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –ø–µ—Ä–µ—Ö–æ–¥—É —á–µ—Ä–µ–∑ guards
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—è –∑–∞–≥–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É wizard
- –û–±—Ä–æ–±–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö –ø–æ–¥—ñ–π (RESET, AUTO_SAVE)

**XState –æ—Å–Ω–æ–≤–Ω—ñ —Å—Ç–∞–Ω–∏:**

- `clientInfo` - –≤–∏–±—ñ—Ä/—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞
- `branchSelection` - –≤–∏–±—ñ—Ä —Ñ—ñ–ª—ñ—ó (—ñ–Ω—ñ—Ü—ñ–∞—Ü—ñ—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ –±–µ–∫–µ–Ω–¥—ñ)
- `itemsManager` - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è + –ø—ñ–¥—Å—Ç–∞–Ω–∏ itemCatalog wizard
- `orderParams` - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (–¥–∞—Ç–∏, –∑–Ω–∏–∂–∫–∏, –æ–ø–ª–∞—Ç–∞)
- `confirmation` - –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è

**XState –ø—ñ–¥—Å—Ç–∞–Ω–∏ (–≤ —Ä–∞–º–∫–∞—Ö itemsManager):**

- `itemBasicInfo` - –æ—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—Ä–µ–¥–º–µ—Ç
- `itemProperties` - –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –ø—Ä–µ–¥–º–µ—Ç–∞
- `defectsStains` - –¥–µ—Ñ–µ–∫—Ç–∏ —Ç–∞ –∑–∞–±—Ä—É–¥–Ω–µ–Ω–Ω—è
- `priceCalculator` - —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ü—ñ–Ω–∏
- `photoDocumentation` - —Ñ–æ—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

---

### **3. Client Step Module**

```
domain/wizard/steps/client-step/
‚îú‚îÄ‚îÄ stores/
‚îÇ   ‚îú‚îÄ‚îÄ client-step.store.ts      # Zustand —Å—Ç–∞–Ω –∫—Ä–æ–∫—É
‚îÇ   ‚îî‚îÄ‚îÄ client-step.selectors.ts  # –°–µ–ª–µ–∫—Ç–æ—Ä–∏ –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
‚îÇ
‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îú‚îÄ‚îÄ client-step.schema.ts     # –û—Å–Ω–æ–≤–Ω–∞ Zod —Å—Ö–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ basic-info.schema.ts      # –°—Ö–µ–º–∞ –±–∞–∑–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
‚îÇ   ‚îî‚îÄ‚îÄ client-data.schema.ts     # –°—Ö–µ–º–∞ –¥–∞–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ use-client-step.hook.ts   # –ì–æ–ª–æ–≤–Ω–∏–π —Ö—É–∫ –∫—Ä–æ–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ use-client-search.hook.ts # –ü–æ—à—É–∫ –∫–ª—ñ—î–Ω—Ç—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ use-client-creation.hook.ts # –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ use-basic-info.hook.ts    # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±–∞–∑–æ–≤–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ client-step.utils.ts      # –£—Ç–∏–ª—ñ—Ç–∏ –∫—Ä–æ–∫—É
‚îÇ   ‚îî‚îÄ‚îÄ client-validation.utils.ts # –í–∞–ª—ñ–¥–∞—Ü—ñ–π–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏
‚îÇ
‚îî‚îÄ‚îÄ index.ts                      # –ï–∫—Å–ø–æ—Ä—Ç API –∫—Ä–æ–∫—É
```

**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å Client Step:**

- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≤–∏–±–æ—Ä–æ–º —ñ—Å–Ω—É—é—á–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞ —á–µ—Ä–µ–∑ form
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –±–∞–∑–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (–Ω–æ–º–µ—Ä –∫–≤–∏—Ç–∞–Ω—Ü—ñ—ó, –º—ñ—Ç–∫–∞)
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç–∞ —Ç–∞ –±–∞–∑–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ domain/client –¥–ª—è API –æ–ø–µ—Ä–∞—Ü—ñ–π

**–°—Ç–∞–Ω Client Step:**

- `selectedClientId` - ID –≤–∏–±—Ä–∞–Ω–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞
- `isNewClient` - —á–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞
- `basicOrderInfo` - –Ω–æ–º–µ—Ä –∫–≤–∏—Ç–∞–Ω—Ü—ñ—ó, –º—ñ—Ç–∫–∞, –¥–∞—Ç–∞ (branchId –±—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –∫—Ä–æ—Ü—ñ)
- `searchState` - —Å—Ç–∞–Ω –ø–æ—à—É–∫—É –∫–ª—ñ—î–Ω—Ç—ñ–≤
- `validationState` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

---

### **4. Branch Selection Module**

```
domain/wizard/steps/branch-selection/
‚îú‚îÄ‚îÄ stores/
‚îÇ   ‚îî‚îÄ‚îÄ branch-selection.store.ts     # Zustand —Å—Ç–∞–Ω –∫—Ä–æ–∫—É
‚îÇ
‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îî‚îÄ‚îÄ branch-selection.schema.ts    # Zod —Å—Ö–µ–º–∞ –≤–∏–±–æ—Ä—É —Ñ—ñ–ª—ñ—ó
‚îÇ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ use-branch-selection.hook.ts  # –ì–æ–ª–æ–≤–Ω–∏–π —Ö—É–∫ –∫—Ä–æ–∫—É
‚îÇ   ‚îî‚îÄ‚îÄ use-branches.hook.ts          # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—ñ–π
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ branch-validation.utils.ts    # –£—Ç–∏–ª—ñ—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
‚îÇ
‚îî‚îÄ‚îÄ index.ts                          # –ï–∫—Å–ø–æ—Ä—Ç API –∫—Ä–æ–∫—É
```

**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å Branch Selection:**

- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ñ—ñ–ª—ñ–π —á–µ—Ä–µ–∑ API
- –í–∏–±—ñ—Ä —Ñ—ñ–ª—ñ—ó –¥–ª—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (–æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –∫—Ä–æ–∫)
- –Ü–Ω—ñ—Ü—ñ–∞—Ü—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ –±–µ–∫–µ–Ω–¥—ñ
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è branchId –≤ –±–∞–∑–æ–≤—ñ–π —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è —â–æ —Ñ—ñ–ª—ñ—è –æ–±—Ä–∞–Ω–∞

**–°—Ç–∞–Ω Branch Selection:**

- `branches` - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Ñ—ñ–ª—ñ–π
- `selectedBranchId` - ID –≤–∏–±—Ä–∞–Ω–æ—ó —Ñ—ñ–ª—ñ—ó
- `isLoading` - –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—ñ–π
- `orderInitiated` - —á–∏ —ñ–Ω—ñ—Ü—ñ–π–æ–≤–∞–Ω–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ –±–µ–∫–µ–Ω–¥—ñ
- `validationState` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

---

### **5. Items Manager Module**

```
domain/wizard/steps/items-manager/
‚îú‚îÄ‚îÄ stores/
‚îÇ   ‚îú‚îÄ‚îÄ items-manager.store.ts    # –ì–æ–ª–æ–≤–Ω–∏–π —Å—Ç–∞–Ω –º–µ–Ω–µ–¥–∂–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ items-list.store.ts       # –°–ø–∏—Å–æ–∫ –¥–æ–¥–∞–Ω–∏—Ö –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ itemCatalog-wizard.store.ts      # –°—Ç–∞–Ω –ø–æ—Ç–æ—á–Ω–æ–≥–æ itemCatalog wizard
‚îÇ
‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îú‚îÄ‚îÄ items-manager.schema.ts   # –°—Ö–µ–º–∞ —Å–ø–∏—Å–∫—É –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ itemCatalog-summary.schema.ts    # –°—Ö–µ–º–∞ –ø—ñ–¥—Å—É–º–∫—É –ø—Ä–µ–¥–º–µ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ items-totals.schema.ts    # –°—Ö–µ–º–∞ –∑–∞–≥–∞–ª—å–Ω–∏—Ö –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—ñ–≤
‚îÇ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ use-items-manager.hook.ts # –ì–æ–ª–æ–≤–Ω–∏–π —Ö—É–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ use-items-list.hook.ts    # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–ø–∏—Å–∫–æ–º –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ use-itemCatalog-operations.hook.ts # CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ use-items-totals.hook.ts  # –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–≥–∞–ª—å–Ω–∏—Ö —Å—É–º
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ items-calculations.utils.ts # –†–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞—Ö
‚îÇ   ‚îî‚îÄ‚îÄ items-validation.utils.ts   # –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Å–ø–∏—Å–∫—É –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
‚îÇ
‚îî‚îÄ‚îÄ index.ts                      # –ï–∫—Å–ø–æ—Ä—Ç API –º–µ–Ω–µ–¥–∂–µ—Ä–∞
```

**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å Items Manager:**

- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–ø–∏—Å–∫–æ–º –¥–æ–¥–∞–Ω–∏—Ö –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—è —Ä–æ–±–æ—Ç–∏ Item Wizard –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
- –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–≥–∞–ª—å–Ω–æ—ó –≤–∞—Ä—Ç–æ—Å—Ç—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ (–¥–æ–¥–∞—Ç–∏, —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏, –≤–∏–¥–∞–ª–∏—Ç–∏)
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è —â–æ —î —Ö–æ—á–∞ –± –æ–¥–∏–Ω –ø—Ä–µ–¥–º–µ—Ç

**–°—Ç–∞–Ω Items Manager:**

- `itemsList` - –º–∞—Å–∏–≤ –¥–æ–¥–∞–Ω–∏—Ö –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
- `totalAmount` - –∑–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- `isItemWizardActive` - —á–∏ –∞–∫—Ç–∏–≤–Ω–∏–π –ø—ñ–¥–≤—ñ–∑–∞—Ä–¥ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–µ–¥–º–µ—Ç–∞
- `editingItemId` - ID –ø—Ä–µ–¥–º–µ—Ç–∞ —â–æ —Ä–µ–¥–∞–≥—É—î—Ç—å—Å—è
- `validationState` - —Å—Ç–∞–Ω –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Å–ø–∏—Å–∫—É

---

### **6. Item Wizard Submodule**

```
domain/wizard/steps/itemCatalog-wizard/
‚îú‚îÄ‚îÄ machine/
‚îÇ   ‚îú‚îÄ‚îÄ itemCatalog-wizard.machine.ts    # XState –º–∞—à–∏–Ω–∞ –¥–ª—è 5 –∫—Ä–æ–∫—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ itemCatalog-wizard.guards.ts     # Guards –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤ –º—ñ–∂ –∫—Ä–æ–∫–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ itemCatalog-wizard.actions.ts    # Actions –¥–ª—è machine
‚îÇ
‚îú‚îÄ‚îÄ stores/
‚îÇ   ‚îú‚îÄ‚îÄ itemCatalog-wizard.store.ts      # –°—Ç–∞–Ω –ø–æ—Ç–æ—á–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ itemCatalog-wizard-ui.store.ts   # UI —Å—Ç–∞–Ω wizard (—Ä–æ–∑–≥–æ—Ä–Ω—É—Ç—ñ —Å–µ–∫—Ü—ñ—ó)
‚îÇ
‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îú‚îÄ‚îÄ basic-info.schema.ts      # –ö—Ä–æ–∫ 1: –∫–∞—Ç–µ–≥–æ—Ä—ñ—è, –Ω–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ characteristics.schema.ts # –ö—Ä–æ–∫ 2: –º–∞—Ç–µ—Ä—ñ–∞–ª, –∫–æ–ª—ñ—Ä, –Ω–∞–ø–æ–≤–Ω—é–≤–∞—á
‚îÇ   ‚îú‚îÄ‚îÄ stains-defects.schema.ts  # –ö—Ä–æ–∫ 3: –ø–ª—è–º–∏, –¥–µ—Ñ–µ–∫—Ç–∏, —Ä–∏–∑–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ price-calculation.schema.ts # –ö—Ä–æ–∫ 4: –º–æ–¥–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏, —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ photo-documentation.schema.ts # –ö—Ä–æ–∫ 5: —Ñ–æ—Ç–æ –ø—Ä–µ–¥–º–µ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ complete-itemCatalog.schema.ts   # –ü–æ–≤–Ω–∏–π –ø—Ä–µ–¥–º–µ—Ç
‚îÇ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ use-itemCatalog-wizard.hook.ts   # –ì–æ–ª–æ–≤–Ω–∏–π —Ö—É–∫ –ø—ñ–¥–≤—ñ–∑–∞—Ä–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ use-basic-info.hook.ts    # –ö—Ä–æ–∫ 1: –æ—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
‚îÇ   ‚îú‚îÄ‚îÄ use-characteristics.hook.ts # –ö—Ä–æ–∫ 2: —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ use-stains-defects.hook.ts # –ö—Ä–æ–∫ 3: –∑–∞–±—Ä—É–¥–Ω–µ–Ω–Ω—è —Ç–∞ –¥–µ—Ñ–µ–∫—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ use-price-calculation.hook.ts # –ö—Ä–æ–∫ 4: —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ü—ñ–Ω–∏
‚îÇ   ‚îî‚îÄ‚îÄ use-photo-documentation.hook.ts # –ö—Ä–æ–∫ 5: —Ñ–æ—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ itemCatalog-price.utils.ts       # –†–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ —Ü—ñ–Ω–∏ –ø—Ä–µ–¥–º–µ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ modifiers.utils.ts        # –†–æ–±–æ—Ç–∞ –∑ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞–º–∏ —Ü—ñ–Ω–∏
‚îÇ   ‚îî‚îÄ‚îÄ photo-processing.utils.ts # –û–±—Ä–æ–±–∫–∞ —Ñ–æ—Ç–æ
‚îÇ
‚îî‚îÄ‚îÄ index.ts                      # –ï–∫—Å–ø–æ—Ä—Ç API –ø—ñ–¥–≤—ñ–∑–∞—Ä–¥–∞
```

**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å Item Wizard:**

- –ü–æ–∫—Ä–æ–∫–æ–≤–∏–π –ø—Ä–æ—Ü–µ—Å –¥–æ–¥–∞–≤–∞–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–µ–¥–º–µ—Ç–∞
- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è 5 –∫—Ä–æ–∫–∞–º–∏ –∑–≥—ñ–¥–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ pricing domain –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤
- –û–±—Ä–æ–±–∫–∞ —Ñ–æ—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–∂–Ω–æ–≥–æ –∫—Ä–æ–∫—É –æ–∫—Ä–µ–º–æ

**5 –ø—ñ–¥–∫—Ä–æ–∫—ñ–≤ Item Wizard (–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ UI):**

1. **itemCatalog-basic-info**: –∫–∞—Ç–µ–≥–æ—Ä—ñ—è –ø–æ—Å–ª—É–≥–∏, –Ω–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è –≤–∏—Ä–æ–±—É, –∫—ñ–ª—å–∫—ñ—Å—Ç—å
2. **itemCatalog-properties**: –º–∞—Ç–µ—Ä—ñ–∞–ª, –∫–æ–ª—ñ—Ä, –Ω–∞–ø–æ–≤–Ω—é–≤–∞—á, —Å—Ç—É–ø—ñ–Ω—å –∑–Ω–æ—Å—É
3. **defects-stains**: –ø–ª—è–º–∏, –¥–µ—Ñ–µ–∫—Ç–∏, —Ä–∏–∑–∏–∫–∏, –ø—Ä–∏–º—ñ—Ç–∫–∏
4. **price-calculator**: –º–æ–¥–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏, –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç–∏, —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ü—ñ–Ω–∏
5. **photo-documentation**: –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –æ–±—Ä–æ–±–∫–∞ —Ñ–æ—Ç–æ

---

### **7. Order Parameters Module**

```
domain/wizard/steps/order-params/
‚îú‚îÄ‚îÄ stores/
‚îÇ   ‚îú‚îÄ‚îÄ order-params.store.ts     # –ì–æ–ª–æ–≤–Ω–∏–π —Å—Ç–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ execution-params.store.ts # –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ discount-params.store.ts  # –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–Ω–∏–∂–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ payment-params.store.ts   # –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –æ–ø–ª–∞—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îú‚îÄ‚îÄ execution-params.schema.ts # –î–∞—Ç–∏, —Ç–µ—Ä–º—ñ–Ω–æ–≤—ñ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ discount-params.schema.ts  # –ó–Ω–∏–∂–∫–∏, –≤–∏–∫–ª—é—á–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ payment-params.schema.ts   # –°–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏, —Å—É–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ additional-info.schema.ts  # –ü—Ä–∏–º—ñ—Ç–∫–∏, –≤–∏–º–æ–≥–∏ –∫–ª—ñ—î–Ω—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ use-order-params.hook.ts  # –ì–æ–ª–æ–≤–Ω–∏–π —Ö—É–∫ –∫—Ä–æ–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ use-execution-params.hook.ts # –î–∞—Ç–∏ —Ç–∞ —Ç–µ—Ä–º—ñ–Ω–æ–≤—ñ—Å—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ use-discount-params.hook.ts  # –ó–Ω–∏–∂–∫–∏ —Ç–∞ –ø—Ä–∞–≤–∏–ª–∞
‚îÇ   ‚îú‚îÄ‚îÄ use-payment-params.hook.ts   # –û–ø–ª–∞—Ç–∞ —Ç–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ use-additional-info.hook.ts  # –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ date-calculations.utils.ts # –†–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ –¥–∞—Ç –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ discount-rules.utils.ts    # –ü—Ä–∞–≤–∏–ª–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–Ω–∏–∂–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ payment-calculations.utils.ts # –†–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ –æ–ø–ª–∞—Ç–∏
‚îÇ
‚îî‚îÄ‚îÄ index.ts                      # –ï–∫—Å–ø–æ—Ä—Ç API –∫—Ä–æ–∫—É
```

**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å Order Parameters:**

- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–∞—Ç–∞–º–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ç–∞ —Ç–µ—Ä–º—ñ–Ω–æ–≤—ñ—Å—Ç—é
- –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –∑–Ω–∏–∂–æ–∫ –∑ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –≤–∏–∫–ª—é—á–µ–Ω—å
- –†–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó —Ç–∞ –≤–∏–º–æ–≥ –∫–ª—ñ—î–Ω—Ç–∞
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ existing order domain –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤

**–°—Ç–∞–Ω Order Parameters:**

- `executionDate` - –¥–∞—Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- `urgencyType` - —Ç–∏–ø —Ç–µ—Ä–º—ñ–Ω–æ–≤–æ—Å—Ç—ñ (–∑–≤–∏—á–∞–π–Ω–µ, +50%, +100%)
- `discountType` - —Ç–∏–ø –∑–Ω–∏–∂–∫–∏ (–µ–≤–µ—Ä–∫–∞—Ä–¥, —Å–æ—Ü–º–µ—Ä–µ–∂—ñ, –ó–°–£)
- `paymentMethod` - —Å–ø–æ—Å—ñ–± –æ–ø–ª–∞—Ç–∏
- `amounts` - —Å—É–º–∏ (–∑–∞–≥–∞–ª—å–Ω–∞, —Å–ø–ª–∞—á–µ–Ω–∞, –±–æ—Ä–≥)
- `additionalInfo` - –ø—Ä–∏–º—ñ—Ç–∫–∏ —Ç–∞ –≤–∏–º–æ–≥–∏

---

### **8. Confirmation Module**

```
domain/wizard/steps/confirmation/
‚îú‚îÄ‚îÄ stores/
‚îÇ   ‚îú‚îÄ‚îÄ confirmation.store.ts     # –°—Ç–∞–Ω –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ terms-agreement.store.ts  # –ó–≥–æ–¥–∞ –∑ —É–º–æ–≤–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ signature.store.ts        # –¶–∏—Ñ—Ä–æ–≤–∏–π –ø—ñ–¥–ø–∏—Å
‚îÇ   ‚îî‚îÄ‚îÄ receipt.store.ts          # –°—Ç–∞–Ω –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∫–≤–∏—Ç–∞–Ω—Ü—ñ—ó
‚îÇ
‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îú‚îÄ‚îÄ confirmation.schema.ts    # –°—Ö–µ–º–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ signature.schema.ts       # –°—Ö–µ–º–∞ –ø—ñ–¥–ø–∏—Å—É
‚îÇ   ‚îî‚îÄ‚îÄ receipt-options.schema.ts # –û–ø—Ü—ñ—ó –∫–≤–∏—Ç–∞–Ω—Ü—ñ—ó
‚îÇ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ use-confirmation.hook.ts  # –ì–æ–ª–æ–≤–Ω–∏–π —Ö—É–∫ –∫—Ä–æ–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ use-terms-agreement.hook.ts # –ó–≥–æ–¥–∞ –∑ —É–º–æ–≤–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ use-signature.hook.ts     # –¶–∏—Ñ—Ä–æ–≤–∏–π –ø—ñ–¥–ø–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ use-receipt-generation.hook.ts # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–≤–∏—Ç–∞–Ω—Ü—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ use-order-completion.hook.ts # –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ signature-processing.utils.ts # –û–±—Ä–æ–±–∫–∞ –ø—ñ–¥–ø–∏—Å—É
‚îÇ   ‚îú‚îÄ‚îÄ receipt-formatting.utils.ts   # –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∫–≤–∏—Ç–∞–Ω—Ü—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ order-finalization.utils.ts   # –§—ñ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
‚îÇ
‚îî‚îÄ‚îÄ index.ts                      # –ï–∫—Å–ø–æ—Ä—Ç API –∫—Ä–æ–∫—É
```

**–í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å Confirmation:**

- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ –ø—ñ–¥—Å—É–º–∫—É –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –û–±—Ä–æ–±–∫–∞ –∑–≥–æ–¥–∏ –∑ —É–º–æ–≤–∞–º–∏ –Ω–∞–¥–∞–Ω–Ω—è –ø–æ—Å–ª—É–≥
- –ó–±—ñ—Ä —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –ø—ñ–¥–ø–∏—Å—É –∫–ª—ñ—î–Ω—Ç–∞
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–∞ –¥—Ä—É–∫ –∫–≤–∏—Ç–∞–Ω—Ü—ñ—ó
- –§—ñ–Ω–∞–ª—å–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –≤ —Å–∏—Å—Ç–µ–º—ñ
- –í—ñ–¥–ø—Ä–∞–≤–∫–∞ email –∫–æ–ø—ñ—ó –∫–≤–∏—Ç–∞–Ω—Ü—ñ—ó

**–°—Ç–∞–Ω Confirmation:**

- `orderSummary` - –ø–æ–≤–Ω–∏–π –ø—ñ–¥—Å—É–º–æ–∫ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- `termsAccepted` - —á–∏ –ø—Ä–∏–π–Ω—è—Ç—ñ —É–º–æ–≤–∏
- `signatureData` - –¥–∞–Ω—ñ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –ø—ñ–¥–ø–∏—Å—É
- `receiptStatus` - —Å—Ç–∞–Ω –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∫–≤–∏—Ç–∞–Ω—Ü—ñ—ó
- `isCompleting` - –ø—Ä–æ—Ü–µ—Å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

---

## üîÑ **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ –¥–æ–º–µ–Ω–∞–º–∏**

### **Client Domain Integration**

- `useClient()` - –ø–æ—à—É–∫ —Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤: Client Step
- TanStack Query –æ–ø–µ—Ä–∞—Ü—ñ—ó: searchClients, createClient, getClient

### **Order Domain Integration**

- `useOrder()` - –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º–∏ —Ç–∞ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏
- `useOrderParameters()` - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤: Items Manager, Order Parameters, Confirmation
- TanStack Query –æ–ø–µ—Ä–∞—Ü—ñ—ó: createOrder, saveOrderItem, calculateTotals

### **Pricing Domain Integration**

- `usePricing()` - –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–∏ —Ç–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤: Item Wizard, Order Parameters
- TanStack Query –æ–ø–µ—Ä–∞—Ü—ñ—ó: getPriceList, calculatePrice, getModifiers

---

## üöÄ **–ü—Ä–æ—Ü–µ—Å —Ä–æ–∑—Ä–æ–±–∫–∏ –ø–æ —Ñ–∞–∑–∞—Ö**

### **–§–∞–∑–∞ 1: Infrastructure (1-2 –¥–Ω—ñ)**

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–∑–æ–≤–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ shared –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤
- –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –æ—Å–Ω–æ–≤–Ω–æ—ó XState –º–∞—à–∏–Ω–∏ flow
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–æ–≤–∏—Ö —Ç–∏–ø—ñ–≤ —Ç–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç

### **–§–∞–∑–∞ 2: Client + Branch Selection (3-4 –¥–Ω—ñ)**

- Client Step - –≤–∏–±—ñ—Ä/—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞
- Branch Selection - –≤–∏–±—ñ—Ä —Ñ—ñ–ª—ñ—ó —Ç–∞ —ñ–Ω—ñ—Ü—ñ–∞—Ü—ñ—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ –±–µ–∫–µ–Ω–¥—ñ
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ client —Ç–∞ order domains
- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ –æ–±–æ—Ö –∫—Ä–æ–∫—ñ–≤

### **–§–∞–∑–∞ 3: Order Parameters (2-3 –¥–Ω—ñ)**

- –°–µ—Ä–µ–¥–Ω—è —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –∑ –±—ñ–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞–º–∏
- –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–∫–ª–∞–¥–Ω–∏—Ö —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤ –∑–Ω–∏–∂–æ–∫
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ order —Ç–∞ pricing domains

### **–§–∞–∑–∞ 4: Items Manager + Item Wizard (4-5 –¥–Ω—ñ–≤)**

- –ù–∞–π—Å–∫–ª–∞–¥–Ω—ñ—à–∏–π –º–æ–¥—É–ª—å –∑ –ø—ñ–¥–≤—ñ–∑–∞—Ä–¥–æ–º
- –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è 5-–∫—Ä–æ–∫–æ–≤–æ–≥–æ Item Wizard
- –°–∫–ª–∞–¥–Ω—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ —Ü—ñ–Ω–∏ —á–µ—Ä–µ–∑ pricing domain
- –û–±—Ä–æ–±–∫–∞ —Ñ–æ—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

### **–§–∞–∑–∞ 5: Confirmation + Final Integration (2-3 –¥–Ω—ñ)**

- –§—ñ–Ω–∞–ª—å–Ω–∏–π –∫—Ä–æ–∫ –∑ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—î—é –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤—Å—ñ—Ö –º–æ–¥—É–ª—ñ–≤ –≤ –≥–æ–ª–æ–≤–Ω–∏–π useWizard hook
- –ü–æ–≤–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è E2E —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤

---

## ‚úÖ **–ö—Ä–∏—Ç–µ—Ä—ñ—ó –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ –∫—Ä–æ–∫—ñ–≤**

### **–î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫—Ä–æ–∫—É:**

- ‚úÖ Zustand store –∑ –ø–æ–≤–Ω–∏–º —Å—Ç–∞–Ω
- ‚úÖ Zod —Å—Ö–µ–º–∏ –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –≤—Å—ñ—Ö –¥–∞–Ω–∏—Ö
- ‚úÖ –ö–æ–º–ø–æ–∑–∏—Ü—ñ–π–Ω–∏–π hook –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é existing domains
- ‚úÖ Unit —Ç–µ—Å—Ç–∏ –¥–ª—è store —Ç–∞ validation
- ‚úÖ Integration —Ç–µ—Å—Ç–∏ –∑ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### **–î–ª—è —Ñ—ñ–Ω–∞–ª—å–Ω–æ—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó:**

- ‚úÖ –ì–æ–ª–æ–≤–Ω–∏–π useWizard hook –ø—Ä–∞—Ü—é—î
- ‚úÖ XState flow –∫–µ—Ä—É—î –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –∫–æ—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å—ñ –∫—Ä–æ–∫–∏ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –∑ UI
- ‚úÖ E2E —Ç–µ—Å—Ç –ø–æ–≤–Ω–æ–≥–æ wizard –ø—Ä–æ—Ö–æ–¥–∏—Ç—å
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–≤–∏—Ç–∞–Ω—Ü—ñ—ó –ø—Ä–∞—Ü—é—î
